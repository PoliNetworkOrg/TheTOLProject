(this["webpackJsonpthe-tol-project"]=this["webpackJsonpthe-tol-project"]||[]).push([[0],{15:function(e){e.exports=JSON.parse('{"name":"the-tol-project","version":"0.0.0","private":true,"homepage":"https://polinetworkorg.github.io/TheTOLProject/","scripts":{"build":"react-scripts build","build:db":"ts-node scripts/database.ts","prebuild:db":"npx rimraf temp && npx mkdirp temp/img","deploy":"gh-pages -d build","predeploy":"npm run build","eject":"react-scripts eject","exports":"ts-prune -e","lint":"eslint ./src ./scripts","lint:fix":"npm run lint -- --fix","start":"react-scripts start","test":"npm run build && npm run lint && npm run exports"},"devDependencies":{"@testing-library/jest-dom":"^5.14.1","@testing-library/react":"^11.2.7","@testing-library/user-event":"^12.8.3","@types/google-spreadsheet":"^3.1.5","@types/jest":"^27.0.2","@types/node":"^16.10.3","@types/react":"^17.0.27","@types/react-dom":"^17.0.9","@types/react-latex":"^2.0.0","@types/underscore":"^1.11.3","@typescript-eslint/eslint-plugin":"^4.33.0","@typescript-eslint/parser":"^4.33.0","axios":"^0.24.0","csstype":"^3.0.9","dotenv":"^10.0.0","eslint":"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","fraction.js":"^4.1.1","gh-pages":"^3.2.3","google-spreadsheet":"^3.1.15","googleapis":"^39.2.0","mkdirp":"^1.0.4","prettier":"^2.4.1","react":"^17.0.2","react-collapsible":"^2.8.4","react-dom":"^17.0.2","react-icons":"^4.3.1","react-latex":"^2.0.0","react-scripts":"4.0.3","react-timer-hook":"^3.0.5","rimraf":"^3.0.2","ts-node":"^10.3.0","ts-prune":"^0.10.1","typescript":"^4.4.3","underscore":"^1.13.1","web-vitals":"^1.1.2"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},63:function(e,t,n){"use strict";n.r(t);var i=n(3),r=n.n(i),s=n(25),c=n.n(s),o=n(4),a=n(14),l=n.n(a),d=n(26),j=n(27),u=n.n(j),b=n(12),x=n(15),p=n(7),O=n.n(p),f={ing:{name:"Inglese",order:1,sample:30,minutes:15,coeff:new O.a("1/3")},mat:{name:"Matematica",order:2,sample:25,minutes:75,coeff:2.6},com:{name:"Comprensione",order:3,sample:1,sub:5,minutes:10,coeff:3},fis:{name:"Fisica",order:4,sample:5,minutes:10,coeff:2}};function m(e){return f[e].name}var g={quesiti_ING:"ing",quesiti_MAT:"mat",quesiti_COM:"com",quesiti_FIS:"fis"};function h(){return(h=Object(d.a)(l.a.mark((function e(){var t,n,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("https://raw.githubusercontent.com/PoliNetworkOrg/TheTOLProjectData/main/database.json");case 2:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===t;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=t.data;case 11:if((null===(r=e.t2)||void 0===r||null===(n=r.meta)||void 0===n?void 0:n.version)==x.version){e.next=14;break}throw new Error("Database version doesn't match application.\nDatabase: ".concat(null===r||void 0===r||null===(i=r.meta)||void 0===i?void 0:i.version,"\nApp: ").concat(x.version));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return"https://raw.githubusercontent.com/PoliNetworkOrg/TheTOLProjectData/main/img/".concat(e)}var y=n(28),S=n.n(y),w=n(1);function I(e){var t=e.text;return Object(w.jsx)(S.a,{children:t})}function k(e){var t=e.db;return Object(w.jsx)("div",{children:Object.entries(t).filter((function(e){return"meta"!=Object(o.a)(e,1)[0]})).map((function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(w.jsxs)("div",{children:[Object(w.jsxs)("h3",{children:["Section: ",n]}),Object(w.jsx)("ul",{children:i.filter((function(e){return e.text||"com"==n})).map((function(e){return Object(w.jsxs)("div",{children:[Object(w.jsx)(I,{text:e.text}),Object(w.jsx)("br",{}),Object(w.jsxs)("p",{children:["Valid: ",e.validated+""]}),Object(w.jsx)("br",{}),Object(w.jsx)(I,{text:e.answers.a}),Object(w.jsx)("br",{}),Object(w.jsx)(I,{text:e.answers.b}),Object(w.jsx)("br",{}),Object(w.jsx)(I,{text:e.answers.c}),Object(w.jsx)("br",{}),Object(w.jsx)(I,{text:e.answers.d}),Object(w.jsx)("br",{}),Object(w.jsx)(I,{text:e.answers.e}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{})]},n+e.id+(e.sub||""))}))})]},n)}))})}function T(e){var t=e.hidden,n=e.display,i=e.internal;return Object(w.jsxs)("div",{hidden:t,children:[Object(w.jsx)("h3",{children:n}),Object(w.jsx)("blockquote",{children:i+""})]})}var C=n(5),A="#F3F3EE",q="#D5DFE4",z="#069",D="yellow",L="#00D700",Q="#009527",F="red",E={fontFamily:"verdana",color:"#333"};function N(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(C.a)(Object(C.a)({},E),t.reduce((function(e,t){return Object(C.a)(Object(C.a)({},e),t)}),{}))}var P=N({fontFamily:" Arial",fontSize:"9.5pt",alignItems:"center"}),M=N({float:"left",marginRight:"2px"}),U=N({float:"right",marginLeft:"2px"});function _(e){return Object(w.jsxs)("button",{style:P,onClick:e.onClick,children:[Object(w.jsx)("span",{style:M,children:e.leftIcon&&e.leftIcon()}),Object(w.jsx)("span",{children:e.label}),Object(w.jsx)("span",{style:U,children:e.rightIcon&&e.rightIcon()})]})}var R=N({height:"70px",display:"flex",alignItems:"baseline",justifyContent:"space-between"}),W=N({fontSize:"18pt",display:"inline-block"});function B(e){var t=e.viewState;return Object(w.jsxs)("div",{style:R,children:[Object(w.jsx)("h1",{style:W,children:"PoliNetwork banner placeholder - The TOL Project"}),Object(w.jsx)(_,{label:"Toggle demo view",onClick:function(){var e=Object(o.a)(t,2),n=e[0],i=e[1];i("dbPreview"==n?"INFO-start":"dbPreview")}})]})}var G=n(29),J=n.n(G),V=N({margin:"10px"}),H=N({background:A,margin:"5px"});function K(e){var t,n=Object(i.useState)(null===(t=e.startOpen)||void 0===t||t),r=Object(o.a)(n,2),s=r[0],c=r[1];return Object(w.jsx)("div",{style:V,children:Object(w.jsx)(J.a,{trigger:Object(w.jsx)(_,{label:e.label,onClick:function(){return c(!s)}}),open:s,easing:"ease-in-out",children:Object(w.jsx)("div",{style:H,children:e.children})})})}var X=N({margin:"2px",padding:"10px",textAlign:"justify"}),Y=N({padding:"1px",margin:0});function Z(e){return Object(w.jsx)(K,{label:e.label,startOpen:e.startOpen,children:Object(w.jsx)("div",{style:X,children:e.longText.trim().split("\n").map((function(e,t){return Object(w.jsx)("p",{style:Y,children:e},t)}))})})}var $=N({display:"flex",flexDirection:"column",justifyContent:"center",fontSize:"11pt"}),ee=N({alignSelf:"center"}),te=N({borderSpacing:0}),ne=N({padding:"5px",paddingInline:"10px",textAlign:"center",border:"thin solid ".concat(q),borderSpacing:"0px",fontSize:"9.5pt"}),ie=N(ne,{fontWeight:"bold",backgroundColor:A,textAlign:"left"}),re=N({textAlign:"center"});function se(e){var t,n=e.answers,i=e.questions,r=Object.fromEntries(Object.entries(i).map((function(e){var t=Object(o.a)(e,2),i=t[0],r=t[1],s=0,c=0,a=0;return r.forEach((function(e){var t=n[i].find((function(t){return t&&t.id==e.id&&t.sub==e.sub}));t&&t.letter?t.letter==e.correct?s++:a++:c++})),[i,{total:r.length,correct:s,notGiven:c,wrong:a}]}))),s=Object.entries(r).map((function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1];return i.total?new O.a(f[n].coeff).mul(i.correct-.25*i.wrong):new O.a(0)})).reduce((function(e,t){return e.add(t)}),new O.a(0)),c=s.compare(60)>=0,a=(null===(t=r.ing)||void 0===t?void 0:t.correct)>=24;return Object(w.jsxs)("div",{style:$,children:[Object(w.jsx)("p",{children:"La simulazione \xe8 finita, questo \xe8 il punteggio: "}),Object(w.jsx)("div",{style:ee,children:Object(w.jsxs)("table",{style:te,children:[Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{}),Object(w.jsx)("td",{style:ie,children:"N\xb0 quesiti"}),Object(w.jsx)("td",{style:ie,children:"Esatti"}),Object(w.jsx)("td",{style:ie,children:"Errati"}),Object(w.jsx)("td",{style:ie,children:"Senza risposta"})]}),Object.entries(r).sort((function(e,t){return f[e[0]].order-f[t[0]].order})).map((function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{style:ie,children:m(n)}),Object(w.jsx)("td",{style:ne,children:i.total}),Object(w.jsx)("td",{style:ne,children:i.correct}),Object(w.jsx)("td",{style:ne,children:i.wrong}),Object(w.jsx)("td",{style:ne,children:i.notGiven})]},n)}))]})}),Object(w.jsxs)("p",{style:re,children:["Punteggio calcolato: ",s.round(2).toString()," / ",100,Object(w.jsx)("br",{}),"Esito:"," ",c?"Superato".concat(a?"":" (OFA TENG)"):"Non superato ".concat(a?"(OFA TEST)":"(OFA TEST + OFA TENG)")]}),Object(w.jsx)(Z,{label:"Come viene calcolato il punteggio",startOpen:!1,longText:"\n      Per ogni sezione viene conteggiato +1 per ogni risposta corretta, -0,25 per ogni risposta errata e 0 per ogni risposta non data.\n      Il punteggio complessivo della sezione viene poi pesato in base al punteggio massimo ottenibile (rispetto all'intero test) e al numero di quesiti:\n      ".concat(Object.entries(f).map((function(t){var n=Object(o.a)(t,2),i=n[0],r=n[1];return"- ".concat(r.name,": peso ").concat("number"==typeof r.coeff?r.coeff:r.coeff.toFraction(),", ").concat(e.questions[i].length," quesiti")})).join("\n"),"\n      ")})]})}function ce(e){return Object(w.jsxs)("div",{children:[Object(w.jsx)("p",{children:"Questa \xe8 una serie di informazioni veramente interessanti sulla demo, che prima o poi mi metter\xf2 a scrivere"}),Object(w.jsx)(_,{label:"Inizia il test",onClick:e.startTest})]})}function oe(e){var t=e.viewState[0];return"INFO-start"==t?Object(w.jsx)(ce,{startTest:function(){e.viewState[1]("TOL-startSec")}}):"INFO-end"==t?Object(w.jsx)(se,{answers:e.answers,questions:e.questions}):Object(w.jsx)("div",{})}var ae=n(30),le=N({fontSize:"11pt"});function de(e){var t=e.tmpAnswerState;return e.currentQuestion?Object(w.jsxs)("div",{children:[Object(w.jsx)(je,{letter:"a",letterState:t,text:e.currentQuestion.answers.a}),Object(w.jsx)(je,{letter:"b",letterState:t,text:e.currentQuestion.answers.b}),Object(w.jsx)(je,{letter:"c",letterState:t,text:e.currentQuestion.answers.c}),Object(w.jsx)(je,{letter:"d",letterState:t,text:e.currentQuestion.answers.d}),Object(w.jsx)(je,{letter:"e",letterState:t,text:e.currentQuestion.answers.e}),Object(w.jsx)(je,{letter:void 0,letterState:t,text:"Non so"})]}):Object(w.jsxs)("span",{style:le,children:[Object(w.jsx)("br",{}),"No answers to display \xaf\\_(\u30c4)_/\xaf"]})}function je(e){var t,n=N({fontWeight:"bold",textAlign:"center",verticalAlign:"middle",paddingInline:"10px"}),i=N({width:"2em",float:"left",display:"inline-block"});return Object(w.jsx)("tr",{style:le,children:Object(w.jsxs)("label",{children:[Object(w.jsxs)("td",{style:n,children:[Object(w.jsxs)("span",{style:i,children:[(null===(t=e.letter)||void 0===t?void 0:t.toUpperCase())||"?"," "]}),Object(w.jsx)("input",{type:"radio",value:e.letter,checked:e.letter==e.letterState[0],onChange:function(t){e.letterState[1](t.target.value||void 0)}})]}),Object(w.jsx)("td",{children:Object(w.jsx)(I,{text:e.text})})]})})}var ue=n(31),be=N({display:"flex",flex:1,justifyContent:"flex-end",fontSize:"9.5pt",verticalAlign:"middle",gap:"10px",paddingBlock:"10px"}),xe=N({display:"flex",alignItems:"center"});function pe(e){var t=Object(o.a)(e.tmpFlaggedState,2),n=t[0],i=t[1];return e.currentQuestion?Object(w.jsxs)("div",{style:be,children:[Object(w.jsxs)("label",{style:xe,children:[Object(w.jsx)("input",{type:"checkbox",checked:n,onChange:function(){i(!n)}}),Object(w.jsx)("span",{children:"Da rivedere"})]}),Object(w.jsx)(_,{label:"Conferma e vai alla successiva",leftIcon:function(){return Object(w.jsx)(ue.a,{})},onClick:function(){e.updateAnswer({id:e.currentQuestion.id,sub:e.currentQuestion.sub,letter:e.tmpAnswerState[0],flagged:n})}})]}):Object(w.jsx)("div",{style:be})}var Oe=n(16),fe=N({display:"flex",justifyContent:"space-between"}),me=N({display:"flex"}),ge=N({display:"flex",padding:"1em",gap:"5px"}),he=N({flexGrow:1,flexShrink:1,textAlign:"center",fontSize:"11pt",minWidth:"4em",padding:"7.5px"}),ve=N({height:"17,5px",width:"17,5px"});function ye(e){var t,n,i,r,s,c;return Object(w.jsxs)("div",{style:fe,children:[Object(w.jsxs)("div",{style:me,children:[Object(w.jsxs)("p",{style:Object(C.a)(Object(C.a)({},he),{},{fontWeight:"bold",width:"11em"}),children:["Domanda ",e.questionIndex+1]}),Object(w.jsx)("p",{style:Object(C.a)(Object(C.a)({},he),{},{backgroundColor:(null===(t=e.currentAnswer)||void 0===t?void 0:t.flagged)?D:(null===(n=e.currentAnswer)||void 0===n?void 0:n.letter)?L:"inherit"}),children:((null===(i=e.currentAnswer)||void 0===i||null===(r=i.letter)||void 0===r?void 0:r.toUpperCase())||"")+((null===(s=e.currentAnswer)||void 0===s?void 0:s.flagged)?"?":"")||" "}),Object(w.jsxs)("p",{style:he,children:["Risposta ",(null===(c=e.currentAnswer)||void 0===c?void 0:c.letter)?"":"non ","data"]})]}),Object(w.jsxs)("div",{style:ge,children:[Object(w.jsx)(_,{label:"precedente",onClick:function(){return e.shiftQuestionIndex(-1)},leftIcon:function(){return Object(w.jsx)(Oe.a,{style:ve})}}),Object(w.jsx)(_,{label:"successiva",onClick:function(){return e.shiftQuestionIndex(1)},rightIcon:function(){return Object(w.jsx)(Oe.b,{style:ve})}})]})]})}var Se=N({marginBottom:"5px"}),we=N({maxHeight:"500px"});function Ie(e){var t,n=e.question;return n?Object(w.jsxs)("div",{style:Se,children:[n.track?Object(w.jsx)(Z,{label:"mostra/nascondi traccia",longText:n.track}):Object(w.jsx)("span",{}),Object(w.jsx)(I,{text:n.text}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),(null===(t=n.attachments)||void 0===t?void 0:t.length)&&Object(w.jsx)(K,{label:"mostra/nascondi allegati",children:n.attachments.map((function(e,t){return Object(w.jsxs)("span",{children:[Object(w.jsxs)("p",{style:Se,children:["Allegato ",t+1,":"]}),Object(w.jsx)("img",{src:v(e),style:we})]},t+1)}))})]}):Object(w.jsx)("span",{style:Se,children:"No question to display \xaf\\_(\u30c4)_/\xaf"})}var ke=N({display:"flex",fontSize:"9.5pt",textDecoration:"none",color:z});function Te(e){return Object(w.jsx)("a",Object(C.a)(Object(C.a)({style:ke},e.active?{href:"#"}:{}),{},{children:e.sectionQuestions.map((function(t,n){var i=e.sectionAnswers.find((function(e){return e&&e.id==t.id&&(!t.sub||t.sub==e.sub)}));return Object(w.jsx)(De,{index:n,letter:null===i||void 0===i?void 0:i.letter,flagged:(null===i||void 0===i?void 0:i.flagged)||!1,onClick:function(){e.active&&e.currentQuestionIndexState[1](n)},selected:e.active&&e.currentQuestionIndexState[0]==n},n)}))}))}var Ce=N({display:"flex",flexShrink:1,flexDirection:"column",alignContent:"baseline",textAlign:"center",width:"4em"}),Ae=N({padding:"0.3em",height:"1.2em",boxShadow:"1px 0 0 0 #606060, 0 1px 0 0 #606060, 1px 1px 0 0 #606060, /* corner */ 1px 0 0 0 #606060 inset, 0 1px 0 0 #606060 inset"}),qe=N({outline:"5px solid ".concat(z),marginInline:"4px",color:"black"}),ze=N({margin:"auto"});function De(e){var t;return Object(w.jsxs)("div",{style:Object(C.a)(Object(C.a)({},Ce),{},{backgroundColor:A},e.selected?qe:{}),onClick:e.onClick,children:[Object(w.jsx)("div",{style:Object(C.a)(Object(C.a)({},Ae),{},{borderBottom:"thin solid #606060"},e.selected?{fontWeight:"bold"}:{}),children:Object(w.jsx)("p",{style:ze,children:e.index+1})}),Object(w.jsx)("div",{style:Object(C.a)(Object(C.a)({},Ae),{},{backgroundColor:e.flagged?D:e.letter?L:"white"}),children:Object(w.jsxs)("p",{style:ze,children:[(null===(t=e.letter)||void 0===t?void 0:t.toUpperCase())||" ",e.flagged&&"?"]})})]})}var Le=n(32),Qe=N({display:"flex",paddingTop:"10px",paddingBottom:"20px",alignItems:"center",flexDirection:"column"});function Fe(e){var t=f[e.section];return Object(w.jsxs)("div",{style:Qe,children:[Object(w.jsxs)("p",{children:["Sezione conclusa: ",t.name,Object(w.jsx)("br",{}),"-"," ",e.sectionAnswers.reduce((function(e,t){return t.letter?e+1:e}),0)," ","/ ",e.sectionQuestions.length," risposte date",Object(w.jsx)("br",{}),"- Tempo utilizzato:"," ",Math.floor(e.secondsUsed/60%60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",Math.floor(e.secondsUsed/60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",(e.secondsUsed%60).toLocaleString(void 0,{minimumIntegerDigits:2})," ","/ ",Math.floor(t.minutes/60),":",t.minutes%60,":00 (",Math.floor((60*t.minutes-e.secondsUsed)/60/60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",Math.floor((60*t.minutes-e.secondsUsed)/60%60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",((60*t.minutes-e.secondsUsed)%60).toLocaleString(void 0,{minimumIntegerDigits:2})," ","rimanente)"]}),Object(w.jsx)(_,{label:t.order==Math.max.apply(Math,Object(Le.a)(Object.values(f).map((function(e){return e.order}))))?"Vedi esito del test":"Prossima sezione",onClick:e.goToNextSection})]})}var Ee=N({display:"flex",paddingTop:"10px",paddingBottom:"20px",alignItems:"center",flexDirection:"column"});function Ne(e){var t=f[e.section];return Object(w.jsxs)("div",{style:Ee,children:[Object(w.jsxs)("p",{children:["Stai per iniziare: ",t.name,Object(w.jsx)("br",{}),"-"," ","com"==e.section?"".concat(t.sample," bran").concat(t.sample>1?"i":"o",", "):"",t.sample," domande",Object(w.jsx)("br",{}),"- ",t.minutes," minuti",Object(w.jsx)("br",{}),"- Peso sezione:"," ","number"==typeof t.coeff?t.coeff:t.coeff.toFraction()]}),Object(w.jsx)(_,{label:"Inzia sezione",onClick:e.startSection})]})}var Pe=N({display:"flex",fontWeight:"bold",color:Q,border:"2px solid",borderRadius:"4px",height:"1.75em",fontSize:"1.25em",alignItems:"center",paddingInline:"10px"}),Me=N({color:F});function Ue(e){var t=e.timer;return Object(w.jsxs)("div",{style:Object(C.a)(Object(C.a)({},Pe),60*(60*t.hours+t.minutes)+t.seconds<60&&(t.hours+t.minutes+t.seconds!=0||e.expired)?Me:{}),children:[t.hours.toLocaleString(void 0,{minimumIntegerDigits:2}),":",t.minutes.toLocaleString(void 0,{minimumIntegerDigits:2}),":",t.seconds.toLocaleString(void 0,{minimumIntegerDigits:2})]})}var _e=N({display:"flex",alignItems:"center",justifyContent:"space-between"}),Re=N({display:"flex",alignItems:"baseline",flexDirection:"row",gap:"15px",fontSize:"11pt"});function We(e){var t=e.currentSection;return Object(w.jsxs)("div",{style:_e,children:[Object(w.jsxs)("div",{style:Re,children:[Object(w.jsx)("div",{children:Object(w.jsxs)("p",{children:["Sezione: ",Object(w.jsx)("b",{children:m(t)})," ",Object(w.jsx)("br",{}),"Riposte: ",e.answers[t].length," /"," ",e.questions[t].length," (",e.answers[t].reduce((function(e,t){return e+(t.flagged?1:0)}),0)," ","da rivedere)"]})}),e.active&&Object(w.jsx)(_,{label:"Chiudi sezione",onClick:e.closeSection})]}),Object(w.jsx)(Ue,{timer:e.timer,expired:e.timerExpired})]})}function Be(e){var t=Object(i.useState)(0),n=Object(o.a)(t,2),r=n[0],s=n[1],c=Object(i.useState)(!1),a=Object(i.useState)(),l=Object(i.useState)(!1),d=Object(o.a)(e.sectionState,2),j=d[0],u=d[1],b=Object(o.a)(e.viewState,2),x=b[0],p=b[1],O=Object(o.a)(e.answersState,2),m=O[0],g=O[1],h=Object(o.a)(e.timeRecordState,2),v=h[0],y=h[1],S=function(){p("TOL-secRecap"),I(0);var e=m;e[j]=e[j].map((function(e){return Object(C.a)(Object(C.a)({},e),{},{flagged:!1})})),g(e);var t=v;t[j]=60*f[j].minutes-(60*(60*T.hours+T.minutes)+T.seconds),y(t),T.restart(new Date,!1)},I=function(e){var t=m[j][e];return c[1]((null===t||void 0===t?void 0:t.flagged)||!1),a[1]((null===t||void 0===t?void 0:t.letter)||void 0),s(e)},k=function(e){var t=(r+e+q.length)%q.length||0;return I(t)},T=Object(ae.useTimer)({expiryTimestamp:Ge(f[j].minutes),autoStart:!1,onExpire:function(){S(),l[1](!0)}}),A=[r,I];if(!e.questions)return Object(w.jsx)("span",{children:"Loading..."});var q=e.questions[e.sectionState[0]],z=q[r],D=m[j][r];return Object(w.jsxs)("div",{children:[Object(w.jsx)(We,{active:"TOL-testing"==x,answers:m,closeSection:S,currentSection:j,questions:e.questions,timer:T,timerExpired:l[0]}),Object(w.jsx)(Te,{active:"TOL-testing"==x,currentQuestionIndexState:A,sectionAnswers:m[j],sectionQuestions:q}),"TOL-startSec"==x?Object(w.jsx)(Ne,{section:j,startSection:function(){p("TOL-testing"),T.start()}}):"TOL-testing"==x?Object(w.jsxs)("div",{children:[Object(w.jsx)(ye,{currentAnswer:D,questionIndex:r,shiftQuestionIndex:k,sectionQuestions:q}),Object(w.jsx)(Ie,{question:z}),Object(w.jsx)(de,{currentAnswer:D,currentQuestion:z,tmpAnswerState:a}),Object(w.jsx)(pe,{currentQuestion:z,tmpAnswerState:a,tmpFlaggedState:c,updateAnswer:function(e){var t=m;t[j][r]=e,g(t),k(1)}})]}):"TOL-secRecap"==x?Object(w.jsx)(Fe,{goToNextSection:function(){var e=function(e){var t=Object.entries(f).sort((function(e,t){return e[1].order-t[1].order})),n=t.findIndex((function(t){return t[0]==e}));return(t[n+1]||[])[0]}(j);e?(u(e),T.restart(Ge(f[e].minutes),!1),l[1](!1),p("TOL-startSec")):p("INFO-end")},section:j,secondsUsed:v[j]||0,sectionAnswers:m[j],sectionQuestions:e.questions[j]}):Object(w.jsx)("div",{})]})}function Ge(e){var t=new Date;return t.setSeconds(t.getSeconds()+60*e),t}var Je=N({height:"15px",backgroundColor:z}),Ve=N({color:"white",margin:"auto .5em",fontSize:"9.5pt"});function He(e){return Object(w.jsx)("div",{style:Je,children:Object(w.jsx)("p",{style:Ve,children:e.text||""})})}function Ke(){var e=Object(i.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(i.useState)(),c=Object(o.a)(s,2),a=c[0],l=c[1],d=Object(i.useState)("dbPreview"),j=Object(o.a)(d,2),u=j[0],x=j[1],p=Object(i.useState)("ing"),O=Object(i.useState)({ing:[],mat:[],com:[],fis:[]}),m=Object(i.useState)({}),v=Object(i.useState)([]),y=Object(o.a)(v,2),S=y[0],I=y[1];return Object(i.useEffect)((function(){n||function(){return h.apply(this,arguments)}().then((function(e){r(e),l(function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(o.a)(e,1)[0];return Object.values(g).includes(t)})).map((function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1].filter((function(e){return e.validated})),r=b.a.shuffle(b.a.uniq(i.map((function(e){return e.id})))).slice(0,f[n].sample);return[n,b.a.shuffle(i.filter((function(e){return r.includes(e.id)})))]})))}(e))})).catch((function(e){I(["There has been an issue while fetching the database data. Please retry later.",e])}))})),Object(w.jsxs)("div",{children:[Object(w.jsx)(B,{viewState:[u,x]}),Object(w.jsx)(He,{text:"Placeholder top separator text"}),Object(w.jsx)(T,{hidden:!S[0],display:S[0]||"",internal:S[1]}),"dbPreview"==u&&n?Object(w.jsx)(k,{db:n}):u.startsWith("TOL")&&a?Object(w.jsx)(Be,{answersState:O,questions:a,sectionState:p,timeRecordState:m,viewState:[u,x]}):u.startsWith("INFO")&&a?Object(w.jsx)(oe,{answers:O[0],questions:a,viewState:[u,x]}):void 0,Object(w.jsx)(He,{text:"Placeholder bottom separator text"})]})}c.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(Ke,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.e7174c26.chunk.js.map