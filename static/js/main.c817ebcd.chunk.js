(this["webpackJsonpthe-tol-project"]=this["webpackJsonpthe-tol-project"]||[]).push([[0],{15:function(e){e.exports=JSON.parse('{"name":"the-tol-project","version":"0.0.0","private":true,"homepage":"https://polinetworkorg.github.io/TheTOLProject/","scripts":{"build":"react-scripts build","build:db":"ts-node scripts/database.ts","prebuild:db":"npx rimraf temp && npx mkdirp temp/img","deploy":"gh-pages -d build","predeploy":"npm run build","eject":"react-scripts eject","exports":"ts-prune -e","lint":"eslint ./src ./scripts","lint:fix":"npm run lint -- --fix","start":"react-scripts start","test":"npm run build && npm run lint && npm run exports"},"devDependencies":{"@testing-library/jest-dom":"^5.14.1","@testing-library/react":"^11.2.7","@testing-library/user-event":"^12.8.3","@types/google-spreadsheet":"^3.1.5","@types/jest":"^27.0.2","@types/node":"^16.10.3","@types/react":"^17.0.27","@types/react-dom":"^17.0.9","@types/react-latex":"^2.0.0","@types/underscore":"^1.11.3","@typescript-eslint/eslint-plugin":"^4.33.0","@typescript-eslint/parser":"^4.33.0","axios":"^0.24.0","csstype":"^3.0.9","dotenv":"^10.0.0","eslint":"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","fraction.js":"^4.1.1","gh-pages":"^3.2.3","google-spreadsheet":"^3.1.15","googleapis":"^39.2.0","mkdirp":"^1.0.4","prettier":"^2.4.1","react":"^17.0.2","react-collapsible":"^2.8.4","react-dom":"^17.0.2","react-icons":"^4.3.1","react-latex":"^2.0.0","react-scripts":"4.0.3","react-timer-hook":"^3.0.5","rimraf":"^3.0.2","ts-node":"^10.3.0","ts-prune":"^0.10.1","typescript":"^4.4.3","underscore":"^1.13.1","web-vitals":"^1.1.2"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},63:function(e,t,n){"use strict";n.r(t);var i=n(3),r=n.n(i),s=n(25),c=n.n(s),a=n(4),o=n(14),l=n.n(o),d=n(26),j=n(27),u=n.n(j),b=n(12),p=n(15),x=n(7),O=n.n(x),f={ing:{name:"Inglese",order:1,sample:30,minutes:15,coeff:new O.a("1/3")},mat:{name:"Matematica",order:2,sample:25,minutes:75,coeff:2.6},com:{name:"Comprensione",order:3,sample:1,sub:5,minutes:10,coeff:3},fis:{name:"Fisica",order:4,sample:5,minutes:10,coeff:2}};function m(e){return f[e].name}var g={quesiti_ING:"ing",quesiti_MAT:"mat",quesiti_COM:"com",quesiti_FIS:"fis"};function v(){return(v=Object(d.a)(l.a.mark((function e(){var t,n,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("https://raw.githubusercontent.com/PoliNetworkOrg/TheTOLProjectData/main/database.json");case 2:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===t;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=t.data;case 11:if((null===(r=e.t2)||void 0===r||null===(n=r.meta)||void 0===n?void 0:n.version)==p.version){e.next=14;break}throw new Error("Database version doesn't match application.\nDatabase: ".concat(null===r||void 0===r||null===(i=r.meta)||void 0===i?void 0:i.version,"\nApp: ").concat(p.version));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return"https://raw.githubusercontent.com/PoliNetworkOrg/TheTOLProjectData/main/img/".concat(e)}var y=n(5),S="#F3F3EE",w="#D5DFE4",I="#069",k="yellow",T="#00D700",C="#009527",A="red",q={fontFamily:"verdana",color:"#333"};function z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(y.a)(Object(y.a)({},q),t.reduce((function(e,t){return Object(y.a)(Object(y.a)({},e),t)}),{}))}var D=n(28),L=n.n(D),Q=n(1);function F(e){var t=e.text;return Object(Q.jsx)(L.a,{children:t})}var E=z();function N(e){var t=e.db;return Object(Q.jsx)("div",{children:Object.entries(t).filter((function(e){return"meta"!=Object(a.a)(e,1)[0]})).map((function(e){var t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(Q.jsxs)("div",{style:E,children:[Object(Q.jsxs)("h3",{children:["Section: ",n]}),Object(Q.jsx)("ul",{children:i.filter((function(e){return e.text||"com"==n})).map((function(e){return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(F,{text:e.text}),Object(Q.jsx)("br",{}),Object(Q.jsxs)("p",{children:["Valid: ",e.validated+""]}),Object(Q.jsx)("br",{}),Object(Q.jsx)(F,{text:e.answers.a}),Object(Q.jsx)("br",{}),Object(Q.jsx)(F,{text:e.answers.b}),Object(Q.jsx)("br",{}),Object(Q.jsx)(F,{text:e.answers.c}),Object(Q.jsx)("br",{}),Object(Q.jsx)(F,{text:e.answers.d}),Object(Q.jsx)("br",{}),Object(Q.jsx)(F,{text:e.answers.e}),Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{})]},n+e.id+(e.sub||""))}))})]},n)}))})}function P(e){var t=e.hidden,n=e.display,i=e.internal;return Object(Q.jsxs)("div",{hidden:t,children:[Object(Q.jsx)("h3",{children:n}),Object(Q.jsx)("blockquote",{children:i+""})]})}var M=z({fontFamily:" Arial",fontSize:"9.5pt",alignItems:"center"}),U=z({float:"left",marginRight:"2px"}),_=z({float:"right",marginLeft:"2px"});function R(e){return Object(Q.jsxs)("button",{style:M,onClick:e.onClick,children:[Object(Q.jsx)("span",{style:U,children:e.leftIcon&&e.leftIcon()}),Object(Q.jsx)("span",{children:e.label}),Object(Q.jsx)("span",{style:_,children:e.rightIcon&&e.rightIcon()})]})}var W=z({height:"70px",display:"flex",alignItems:"baseline",justifyContent:"space-between"}),B=z({fontSize:"18pt",display:"inline-block"});function G(e){var t=e.viewState;return Object(Q.jsxs)("div",{style:W,children:[Object(Q.jsx)("h1",{style:B,children:"PoliNetwork banner placeholder - The TOL Project"}),Object(Q.jsx)(R,{label:"Toggle demo view",onClick:function(){var e=Object(a.a)(t,2),n=e[0],i=e[1];i("dbPreview"==n?"INFO-start":"dbPreview")}})]})}var J=n(29),V=n.n(J),H=z({margin:"10px"}),K=z({background:S,margin:"5px"});function X(e){var t,n=Object(i.useState)(null===(t=e.startOpen)||void 0===t||t),r=Object(a.a)(n,2),s=r[0],c=r[1];return Object(Q.jsx)("div",{style:H,children:Object(Q.jsx)(V.a,{trigger:Object(Q.jsx)(R,{label:e.label,onClick:function(){return c(!s)}}),open:s,easing:"ease-in-out",children:Object(Q.jsx)("div",{style:K,children:e.children})})})}var Y=z({margin:"2px",padding:"10px",textAlign:"justify"}),Z=z({padding:"1px",margin:0});function $(e){return Object(Q.jsx)(X,{label:e.label,startOpen:e.startOpen,children:Object(Q.jsx)("div",{style:Y,children:e.longText.trim().split("\n").map((function(e,t){return Object(Q.jsx)("p",{style:Z,children:e},t)}))})})}var ee=z({display:"flex",flexDirection:"column",justifyContent:"center",fontSize:"11pt"}),te=z({alignSelf:"center"}),ne=z({borderSpacing:0}),ie=z({padding:"5px",paddingInline:"10px",textAlign:"center",border:"thin solid ".concat(w),borderSpacing:"0px",fontSize:"9.5pt"}),re=z(ie,{fontWeight:"bold",backgroundColor:S,textAlign:"left"}),se=z({textAlign:"center"});function ce(e){var t,n=e.answers,i=e.questions,r=Object.fromEntries(Object.entries(i).map((function(e){var t=Object(a.a)(e,2),i=t[0],r=t[1],s=0,c=0,o=0;return r.forEach((function(e){var t=n[i].find((function(t){return t&&t.id==e.id&&t.sub==e.sub}));t&&t.letter?t.letter==e.correct?s++:o++:c++})),[i,{total:r.length,correct:s,notGiven:c,wrong:o}]}))),s=Object.entries(r).map((function(e){var t=Object(a.a)(e,2),n=t[0],i=t[1];return i.total?new O.a(f[n].coeff).mul(i.correct-.25*i.wrong):new O.a(0)})).reduce((function(e,t){return e.add(t)}),new O.a(0)),c=s.compare(60)>=0,o=(null===(t=r.ing)||void 0===t?void 0:t.correct)>=24;return Object(Q.jsxs)("div",{style:ee,children:[Object(Q.jsx)("p",{children:"La simulazione \xe8 finita, questo \xe8 il risultato: "}),Object(Q.jsx)("div",{style:te,children:Object(Q.jsxs)("table",{style:ne,children:[Object(Q.jsxs)("tr",{children:[Object(Q.jsx)("td",{}),Object(Q.jsx)("td",{style:re,children:"N\xb0 quesiti"}),Object(Q.jsx)("td",{style:re,children:"Esatti"}),Object(Q.jsx)("td",{style:re,children:"Errati"}),Object(Q.jsx)("td",{style:re,children:"Senza risposta"})]}),Object.entries(r).sort((function(e,t){return f[e[0]].order-f[t[0]].order})).map((function(e){var t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(Q.jsxs)("tr",{children:[Object(Q.jsx)("td",{style:re,children:m(n)}),Object(Q.jsx)("td",{style:ie,children:i.total}),Object(Q.jsx)("td",{style:ie,children:i.correct}),Object(Q.jsx)("td",{style:ie,children:i.wrong}),Object(Q.jsx)("td",{style:ie,children:i.notGiven})]},n)}))]})}),Object(Q.jsxs)("p",{style:se,children:["Punteggio calcolato: ",s.round(2).toString()," / ",100,Object(Q.jsx)("br",{}),"Esito:"," ",c?"Superato".concat(o?"":" (OFA TENG)"):"Non superato ".concat(o?"(OFA TEST)":"(OFA TEST + OFA TENG)")]}),Object(Q.jsx)($,{label:"Come viene calcolato il punteggio",startOpen:!1,longText:"\n      Per ogni sezione viene conteggiato +1 per ogni risposta corretta, -0,25 per ogni risposta errata e 0 per ogni risposta non data.\n      Il punteggio complessivo della sezione viene poi pesato in base al punteggio massimo ottenibile (rispetto all'intero test) e al numero di quesiti:\n      ".concat(Object.entries(f).map((function(t){var n=Object(a.a)(t,2),i=n[0],r=n[1];return"- ".concat(r.name,": peso ").concat("number"==typeof r.coeff?r.coeff:r.coeff.toFraction(),", ").concat(e.questions[i].length," quesiti")})).join("\n"),"\n      ")})]})}function ae(e){return Object(Q.jsxs)("div",{children:[Object(Q.jsx)("p",{children:"Questa \xe8 una serie di informazioni veramente interessanti sulla demo, che prima o poi mi metter\xf2 a scrivere"}),Object(Q.jsx)(R,{label:"Inizia il test",onClick:e.startTest})]})}function oe(e){var t=e.viewState[0];return"INFO-start"==t?Object(Q.jsx)(ae,{startTest:function(){e.viewState[1]("TOL-startSec")}}):"INFO-end"==t?Object(Q.jsx)(ce,{answers:e.answers,questions:e.questions}):Object(Q.jsx)("div",{})}var le=n(30),de=z({fontSize:"11pt"});function je(e){var t=e.tmpAnswerState;return e.currentQuestion?Object(Q.jsxs)("div",{children:[Object(Q.jsx)(ue,{letter:"a",letterState:t,text:e.currentQuestion.answers.a}),Object(Q.jsx)(ue,{letter:"b",letterState:t,text:e.currentQuestion.answers.b}),Object(Q.jsx)(ue,{letter:"c",letterState:t,text:e.currentQuestion.answers.c}),Object(Q.jsx)(ue,{letter:"d",letterState:t,text:e.currentQuestion.answers.d}),Object(Q.jsx)(ue,{letter:"e",letterState:t,text:e.currentQuestion.answers.e}),Object(Q.jsx)(ue,{letter:void 0,letterState:t,text:"Non so"})]}):Object(Q.jsxs)("span",{style:de,children:[Object(Q.jsx)("br",{}),"No answers to display \xaf\\_(\u30c4)_/\xaf"]})}function ue(e){var t,n=z({fontWeight:"bold",textAlign:"center",verticalAlign:"middle",paddingInline:"10px"}),i=z({width:"2em",float:"left",display:"inline-block"});return Object(Q.jsx)("tr",{style:de,children:Object(Q.jsxs)("label",{children:[Object(Q.jsxs)("td",{style:n,children:[Object(Q.jsxs)("span",{style:i,children:[(null===(t=e.letter)||void 0===t?void 0:t.toUpperCase())||"?"," "]}),Object(Q.jsx)("input",{type:"radio",value:e.letter,checked:e.letter==e.letterState[0],onChange:function(t){e.letterState[1](t.target.value||void 0)}})]}),Object(Q.jsx)("td",{children:Object(Q.jsx)(F,{text:e.text})})]})})}var be=n(31),pe=z({display:"flex",flex:1,justifyContent:"flex-end",fontSize:"9.5pt",verticalAlign:"middle",gap:"10px",paddingBlock:"10px"}),xe=z({display:"flex",alignItems:"center"});function Oe(e){var t=Object(a.a)(e.tmpFlaggedState,2),n=t[0],i=t[1];return e.currentQuestion?Object(Q.jsxs)("div",{style:pe,children:[Object(Q.jsxs)("label",{style:xe,children:[Object(Q.jsx)("input",{type:"checkbox",checked:n,onChange:function(){i(!n)}}),Object(Q.jsx)("span",{children:"Da rivedere"})]}),Object(Q.jsx)(R,{label:"Conferma e vai alla successiva",leftIcon:function(){return Object(Q.jsx)(be.a,{})},onClick:function(){e.updateAnswer({id:e.currentQuestion.id,sub:e.currentQuestion.sub,letter:e.tmpAnswerState[0],flagged:n})}})]}):Object(Q.jsx)("div",{style:pe})}var fe=n(16),me=z({display:"flex",justifyContent:"space-between"}),ge=z({display:"flex"}),ve=z({display:"flex",padding:"1em",gap:"5px"}),he=z({flexGrow:1,flexShrink:1,textAlign:"center",fontSize:"11pt",minWidth:"4em",padding:"7.5px"}),ye=z({height:"17,5px",width:"17,5px"});function Se(e){var t,n,i,r,s,c;return Object(Q.jsxs)("div",{style:me,children:[Object(Q.jsxs)("div",{style:ge,children:[Object(Q.jsxs)("p",{style:Object(y.a)(Object(y.a)({},he),{},{fontWeight:"bold",width:"11em"}),children:["Domanda ",e.questionIndex+1]}),Object(Q.jsx)("p",{style:Object(y.a)(Object(y.a)({},he),{},{backgroundColor:(null===(t=e.currentAnswer)||void 0===t?void 0:t.flagged)?k:(null===(n=e.currentAnswer)||void 0===n?void 0:n.letter)?T:"inherit"}),children:((null===(i=e.currentAnswer)||void 0===i||null===(r=i.letter)||void 0===r?void 0:r.toUpperCase())||"")+((null===(s=e.currentAnswer)||void 0===s?void 0:s.flagged)?"?":"")||" "}),Object(Q.jsxs)("p",{style:he,children:["Risposta ",(null===(c=e.currentAnswer)||void 0===c?void 0:c.letter)?"":"non ","data"]})]}),Object(Q.jsxs)("div",{style:ve,children:[Object(Q.jsx)(R,{label:"precedente",onClick:function(){return e.shiftQuestionIndex(-1)},leftIcon:function(){return Object(Q.jsx)(fe.a,{style:ye})}}),Object(Q.jsx)(R,{label:"successiva",onClick:function(){return e.shiftQuestionIndex(1)},rightIcon:function(){return Object(Q.jsx)(fe.b,{style:ye})}})]})]})}var we=z({marginBottom:"5px"}),Ie=z({maxHeight:"500px"});function ke(e){var t,n=e.question;return n?Object(Q.jsxs)("div",{style:we,children:[n.track?Object(Q.jsx)($,{label:"mostra/nascondi traccia",longText:n.track}):Object(Q.jsx)("span",{}),Object(Q.jsx)(F,{text:n.text}),Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),(null===(t=n.attachments)||void 0===t?void 0:t.length)&&Object(Q.jsx)(X,{label:"mostra/nascondi allegati",children:n.attachments.map((function(e,t){return Object(Q.jsxs)("span",{children:[Object(Q.jsxs)("p",{style:we,children:["Allegato ",t+1,":"]}),Object(Q.jsx)("img",{src:h(e),style:Ie})]},t+1)}))})]}):Object(Q.jsx)("span",{style:we,children:"No question to display \xaf\\_(\u30c4)_/\xaf"})}var Te=z({display:"flex",fontSize:"9.5pt",textDecoration:"none",color:I});function Ce(e){return Object(Q.jsx)("a",Object(y.a)(Object(y.a)({style:Te},e.active?{href:"#"}:{}),{},{children:e.sectionQuestions.map((function(t,n){var i=e.sectionAnswers.find((function(e){return e&&e.id==t.id&&(!t.sub||t.sub==e.sub)}));return Object(Q.jsx)(Le,{index:n,letter:null===i||void 0===i?void 0:i.letter,flagged:(null===i||void 0===i?void 0:i.flagged)||!1,onClick:function(){e.active&&e.currentQuestionIndexState[1](n)},selected:e.active&&e.currentQuestionIndexState[0]==n},n)}))}))}var Ae=z({display:"flex",flexShrink:1,flexDirection:"column",alignContent:"baseline",textAlign:"center",width:"4em"}),qe=z({padding:"0.3em",height:"1.2em",boxShadow:"1px 0 0 0 #606060, 0 1px 0 0 #606060, 1px 1px 0 0 #606060, /* corner */ 1px 0 0 0 #606060 inset, 0 1px 0 0 #606060 inset"}),ze=z({outline:"5px solid ".concat(I),marginInline:"4px",color:"black"}),De=z({margin:"auto"});function Le(e){var t;return Object(Q.jsxs)("div",{style:Object(y.a)(Object(y.a)({},Ae),{},{backgroundColor:S},e.selected?ze:{}),onClick:e.onClick,children:[Object(Q.jsx)("div",{style:Object(y.a)(Object(y.a)({},qe),{},{borderBottom:"thin solid #606060"},e.selected?{fontWeight:"bold"}:{}),children:Object(Q.jsx)("p",{style:De,children:e.index+1})}),Object(Q.jsx)("div",{style:Object(y.a)(Object(y.a)({},qe),{},{backgroundColor:e.flagged?k:e.letter?T:"white"}),children:Object(Q.jsxs)("p",{style:De,children:[(null===(t=e.letter)||void 0===t?void 0:t.toUpperCase())||" ",e.flagged&&"?"]})})]})}var Qe=n(32),Fe=z({display:"flex",paddingTop:"10px",paddingBottom:"20px",alignItems:"center",flexDirection:"column"});function Ee(e){var t=f[e.section];return Object(Q.jsxs)("div",{style:Fe,children:[Object(Q.jsxs)("p",{children:["Sezione conclusa: ",t.name,Object(Q.jsx)("br",{}),"-"," ",e.sectionAnswers.reduce((function(e,t){return t.letter?e+1:e}),0)," ","/ ",e.sectionQuestions.length," risposte date",Object(Q.jsx)("br",{}),"- Tempo utilizzato:"," ",Math.floor(e.secondsUsed/60%60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",Math.floor(e.secondsUsed/60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",(e.secondsUsed%60).toLocaleString(void 0,{minimumIntegerDigits:2})," ","/ ",Math.floor(t.minutes/60),":",t.minutes%60,":00 (",Math.floor((60*t.minutes-e.secondsUsed)/60/60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",Math.floor((60*t.minutes-e.secondsUsed)/60%60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",((60*t.minutes-e.secondsUsed)%60).toLocaleString(void 0,{minimumIntegerDigits:2})," ","rimanente)"]}),Object(Q.jsx)(R,{label:t.order==Math.max.apply(Math,Object(Qe.a)(Object.values(f).map((function(e){return e.order}))))?"Vedi esito del test":"Prossima sezione",onClick:e.goToNextSection})]})}var Ne=z({display:"flex",paddingTop:"10px",paddingBottom:"20px",alignItems:"center",flexDirection:"column"});function Pe(e){var t=f[e.section];return Object(Q.jsxs)("div",{style:Ne,children:[Object(Q.jsxs)("p",{children:["Stai per iniziare: ",t.name,Object(Q.jsx)("br",{}),"-"," ","com"==e.section?"".concat(t.sample," bran").concat(t.sample>1?"i":"o",", "):"",t.sample," domande",Object(Q.jsx)("br",{}),"- ",t.minutes," minuti",Object(Q.jsx)("br",{}),"- Peso sezione:"," ","number"==typeof t.coeff?t.coeff:t.coeff.toFraction()]}),Object(Q.jsx)(R,{label:"Inzia sezione",onClick:e.startSection})]})}var Me=z({display:"flex",fontWeight:"bold",color:C,border:"2px solid",borderRadius:"4px",height:"1.75em",fontSize:"1.25em",alignItems:"center",paddingInline:"10px"}),Ue=z({color:A});function _e(e){var t=e.timer;return Object(Q.jsxs)("div",{style:Object(y.a)(Object(y.a)({},Me),60*(60*t.hours+t.minutes)+t.seconds<60&&(t.hours+t.minutes+t.seconds!=0||e.expired)?Ue:{}),children:[t.hours.toLocaleString(void 0,{minimumIntegerDigits:2}),":",t.minutes.toLocaleString(void 0,{minimumIntegerDigits:2}),":",t.seconds.toLocaleString(void 0,{minimumIntegerDigits:2})]})}var Re=z({display:"flex",alignItems:"center",justifyContent:"space-between"}),We=z({display:"flex",alignItems:"baseline",flexDirection:"row",gap:"15px",fontSize:"11pt"});function Be(e){var t=e.currentSection;return Object(Q.jsxs)("div",{style:Re,children:[Object(Q.jsxs)("div",{style:We,children:[Object(Q.jsx)("div",{children:Object(Q.jsxs)("p",{children:["Sezione: ",Object(Q.jsx)("b",{children:m(t)})," ",Object(Q.jsx)("br",{}),"Riposte: ",e.answers[t].length," /"," ",e.questions[t].length," (",e.answers[t].reduce((function(e,t){return e+(t.flagged?1:0)}),0)," ","da rivedere)"]})}),e.active&&Object(Q.jsx)(R,{label:"Chiudi sezione",onClick:e.closeSection})]}),Object(Q.jsx)(_e,{timer:e.timer,expired:e.timerExpired})]})}function Ge(e){var t=Object(i.useState)(0),n=Object(a.a)(t,2),r=n[0],s=n[1],c=Object(i.useState)(!1),o=Object(i.useState)(),l=Object(i.useState)(!1),d=Object(i.useState)(!1),j=Object(a.a)(e.sectionState,2),u=j[0],b=j[1],p=Object(a.a)(e.viewState,2),x=p[0],O=p[1],m=Object(a.a)(e.answersState,2),g=m[0],v=m[1],h=Object(a.a)(e.timeRecordState,2),S=h[0],w=h[1],I=e.questions[e.sectionState[0]],k=I[r],T=g[u][r],C=!d[0]&&(o[0]!=(null===T||void 0===T?void 0:T.letter)||c[0]!=((null===T||void 0===T?void 0:T.flagged)||!1)),A=function(){alert('Se prima non premi "Conferma e vai alla successiva" la risposta non verr\xe0 salvata.'),d[1](!0)},q=function(){if(C)return A();O("TOL-secRecap"),z(0);var e=g;e[u]=e[u].map((function(e){return Object(y.a)(Object(y.a)({},e),{},{flagged:!1})})),v(e);var t=S;t[u]=60*f[u].minutes-(60*(60*L.hours+L.minutes)+L.seconds),w(t),L.restart(new Date,!1)},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(C&&!t)A();else{var n=g[u][e];c[1]((null===n||void 0===n?void 0:n.flagged)||!1),o[1]((null===n||void 0===n?void 0:n.letter)||void 0),d[1](!1),s(e)}},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(r+e+I.length)%I.length||0;return z(n,t)},L=Object(le.useTimer)({expiryTimestamp:Je(f[u].minutes),autoStart:!1,onExpire:function(){q(),l[1](!0)}}),F=[r,z];if(!e.questions)return Object(Q.jsx)("span",{children:"Loading..."});return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(Be,{active:"TOL-testing"==x,answers:g,closeSection:q,currentSection:u,questions:e.questions,timer:L,timerExpired:l[0]}),Object(Q.jsx)(Ce,{active:"TOL-testing"==x,currentQuestionIndexState:F,sectionAnswers:g[u],sectionQuestions:I}),"TOL-startSec"==x?Object(Q.jsx)(Pe,{section:u,startSection:function(){O("TOL-testing"),L.start()}}):"TOL-testing"==x?Object(Q.jsxs)("div",{children:[Object(Q.jsx)(Se,{currentAnswer:T,questionIndex:r,shiftQuestionIndex:D,sectionQuestions:I}),Object(Q.jsx)(ke,{question:k}),Object(Q.jsx)(je,{currentAnswer:T,currentQuestion:k,tmpAnswerState:o}),Object(Q.jsx)(Oe,{currentQuestion:k,tmpAnswerState:o,tmpFlaggedState:c,updateAnswer:function(e){var t=g;t[u][r]=e,v(t),D(1,!0)}})]}):"TOL-secRecap"==x?Object(Q.jsx)(Ee,{goToNextSection:function(){var e=function(e){var t=Object.entries(f).sort((function(e,t){return e[1].order-t[1].order})),n=t.findIndex((function(t){return t[0]==e}));return(t[n+1]||[])[0]}(u);e?(b(e),L.restart(Je(f[e].minutes),!1),l[1](!1),O("TOL-startSec")):O("INFO-end")},section:u,secondsUsed:S[u]||0,sectionAnswers:g[u],sectionQuestions:e.questions[u]}):Object(Q.jsx)("div",{})]})}function Je(e){var t=new Date;return t.setSeconds(t.getSeconds()+60*e),t}var Ve=z({height:"15px",backgroundColor:I}),He=z({color:"white",margin:"auto .5em",fontSize:"9.5pt"});function Ke(e){return Object(Q.jsx)("div",{style:Ve,children:Object(Q.jsx)("p",{style:He,children:e.text||""})})}function Xe(){var e=Object(i.useState)(),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(i.useState)(),c=Object(a.a)(s,2),o=c[0],l=c[1],d=Object(i.useState)("dbPreview"),j=Object(a.a)(d,2),u=j[0],p=j[1],x=Object(i.useState)("ing"),O=Object(i.useState)({ing:[],mat:[],com:[],fis:[]}),m=Object(i.useState)({}),h=Object(i.useState)([]),y=Object(a.a)(h,2),S=y[0],w=y[1];return Object(i.useEffect)((function(){n||function(){return v.apply(this,arguments)}().then((function(e){r(e),l(function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(a.a)(e,1)[0];return Object.values(g).includes(t)})).map((function(e){var t=Object(a.a)(e,2),n=t[0],i=t[1].filter((function(e){return e.validated})),r=b.a.shuffle(b.a.uniq(i.map((function(e){return e.id})))).slice(0,f[n].sample);return[n,b.a.shuffle(i.filter((function(e){return r.includes(e.id)})))]})))}(e))})).catch((function(e){w(["There has been an issue while fetching the database data. Please retry later.",e])}))})),Object(Q.jsxs)("div",{children:[Object(Q.jsx)(G,{viewState:[u,p]}),Object(Q.jsx)(Ke,{text:"Placeholder top separator text"}),Object(Q.jsx)(P,{hidden:!S[0],display:S[0]||"",internal:S[1]}),"dbPreview"==u&&n?Object(Q.jsx)(N,{db:n}):u.startsWith("TOL")&&o?Object(Q.jsx)(Ge,{answersState:O,questions:o,sectionState:x,timeRecordState:m,viewState:[u,p]}):u.startsWith("INFO")&&o?Object(Q.jsx)(oe,{answers:O[0],questions:o,viewState:[u,p]}):void 0,Object(Q.jsx)(Ke,{text:"Placeholder bottom separator text"})]})}c.a.render(Object(Q.jsx)(r.a.StrictMode,{children:Object(Q.jsx)(Xe,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.c817ebcd.chunk.js.map