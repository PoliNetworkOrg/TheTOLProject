(this["webpackJsonpthe-tol-project"]=this["webpackJsonpthe-tol-project"]||[]).push([[0],{15:function(e){e.exports=JSON.parse('{"name":"the-tol-project","version":"0.0.0","private":true,"homepage":"https://polinetworkorg.github.io/TheTOLProject/","scripts":{"build":"react-scripts build","build:db":"ts-node scripts/database.ts","prebuild:db":"npx rimraf temp && npx mkdirp temp/img","deploy":"gh-pages -d build","predeploy":"npm run build","eject":"react-scripts eject","exports":"ts-prune -e","lint":"eslint ./src ./scripts","lint:fix":"npm run lint -- --fix","start":"react-scripts start","test":"npm run build && npm run lint && npm run exports"},"devDependencies":{"@testing-library/jest-dom":"^5.14.1","@testing-library/react":"^11.2.7","@testing-library/user-event":"^12.8.3","@types/google-spreadsheet":"^3.1.5","@types/jest":"^27.0.2","@types/node":"^16.10.3","@types/react":"^17.0.27","@types/react-dom":"^17.0.9","@types/react-latex":"^2.0.0","@types/underscore":"^1.11.3","@typescript-eslint/eslint-plugin":"^4.33.0","@typescript-eslint/parser":"^4.33.0","axios":"^0.24.0","csstype":"^3.0.9","dotenv":"^10.0.0","eslint":"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","fraction.js":"github:EndBug/Fraction.js","gh-pages":"^3.2.3","google-spreadsheet":"^3.1.15","googleapis":"^39.2.0","mkdirp":"^1.0.4","prettier":"^2.4.1","react":"^17.0.2","react-collapsible":"^2.8.4","react-dom":"^17.0.2","react-icons":"^4.3.1","react-latex":"^2.0.0","react-scripts":"4.0.3","react-timer-hook":"^3.0.5","rimraf":"^3.0.2","ts-node":"^10.3.0","ts-prune":"^0.10.1","typescript":"^4.4.3","underscore":"^1.13.1","web-vitals":"^1.1.2"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},63:function(e,t,n){"use strict";n.r(t);var i=n(3),r=n.n(i),s=n(25),c=n.n(s),a=n(4),o=n(14),l=n.n(o),d=n(26),j=n(27),u=n.n(j),b=n(12),x=n(15),p=n(8),O=n.n(p),f={ing:{name:"Inglese",order:1,sample:30,minutes:15,coeff:new O.a("1/3")},mat:{name:"Matematica",order:2,sample:25,minutes:75,coeff:2.6},com:{name:"Comprensione",order:3,sample:1,sub:5,minutes:10,coeff:3},fis:{name:"Fisica",order:4,sample:5,minutes:10,coeff:2}},g=1,m=-.25,v=0;function h(e){return f[e].name}var y={quesiti_ING:"ing",quesiti_MAT:"mat",quesiti_COM:"com",quesiti_FIS:"fis"};function S(){return(S=Object(d.a)(l.a.mark((function e(){var t,n,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("https://raw.githubusercontent.com/PoliNetworkOrg/TheTOLProjectData/main/database.json");case 2:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===t;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=t.data;case 11:if((null===(r=e.t2)||void 0===r||null===(n=r.meta)||void 0===n?void 0:n.version)==x.version){e.next=14;break}throw new Error("Database version doesn't match application.\nDatabase: ".concat(null===r||void 0===r||null===(i=r.meta)||void 0===i?void 0:i.version,"\nApp: ").concat(x.version));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return"https://raw.githubusercontent.com/PoliNetworkOrg/TheTOLProjectData/main/img/".concat(e)}var I=n(5),k="#F3F3EE",C="#D5DFE4",T="#069",A="yellow",z="#00D700",D="#009527",L="red",q={fontFamily:"verdana",color:"#333"};function Q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(I.a)(Object(I.a)({},q),t.reduce((function(e,t){return Object(I.a)(Object(I.a)({},e),t)}),{}))}var F=n(28),E=n.n(F),N=n(1);function P(e){var t=e.text;return Object(N.jsx)(E.a,{children:t})}var M=Q();function U(e){var t=e.db;return Object(N.jsx)("div",{children:Object.entries(t).filter((function(e){return"meta"!=Object(a.a)(e,1)[0]})).map((function(e){var t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(N.jsxs)("div",{style:M,children:[Object(N.jsxs)("h3",{children:["Section: ",n]}),Object(N.jsx)("ul",{children:i.filter((function(e){return e.text||"com"==n})).map((function(e){return Object(N.jsxs)("div",{children:[Object(N.jsx)(P,{text:e.text}),Object(N.jsx)("br",{}),Object(N.jsxs)("p",{children:["Valid: ",e.validated+""]}),Object(N.jsx)("br",{}),Object(N.jsx)(P,{text:e.answers.a}),Object(N.jsx)("br",{}),Object(N.jsx)(P,{text:e.answers.b}),Object(N.jsx)("br",{}),Object(N.jsx)(P,{text:e.answers.c}),Object(N.jsx)("br",{}),Object(N.jsx)(P,{text:e.answers.d}),Object(N.jsx)("br",{}),Object(N.jsx)(P,{text:e.answers.e}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{})]},n+e.id+(e.sub||""))}))})]},n)}))})}function _(e){var t=e.hidden,n=e.display,i=e.internal;return Object(N.jsxs)("div",{hidden:t,children:[Object(N.jsx)("h3",{children:n}),Object(N.jsx)("blockquote",{children:i+""})]})}var R=Q({fontFamily:" Arial",fontSize:"9.5pt",alignItems:"center"}),W=Q({float:"left",marginRight:"2px"}),B=Q({float:"right",marginLeft:"2px"});function G(e){return Object(N.jsxs)("button",{style:R,onClick:e.onClick,children:[Object(N.jsx)("span",{style:W,children:e.leftIcon&&e.leftIcon()}),Object(N.jsx)("span",{children:e.label}),Object(N.jsx)("span",{style:B,children:e.rightIcon&&e.rightIcon()})]})}var J=n.p+"static/media/logo.34b8e2e9.webp",V=Q({height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between"}),H=Q({flex:1,fontSize:"18pt",display:"inline-block"}),K=Q(H,{display:"flex",justifyContent:"center"}),X=Q({flex:1,display:"flex",alignItems:"center",gap:"10px",margin:"5px"}),Y=Q({height:"60px"}),Z=Q({display:"flex",flex:1,justifyContent:"flex-end"});function $(e){var t=e.viewState;return Object(N.jsxs)("div",{style:V,children:[Object(N.jsxs)("div",{style:X,children:[Object(N.jsx)("img",{src:J,alt:"logo",style:Y}),Object(N.jsx)("h1",{style:H,children:"PoliNetwork"})]}),Object(N.jsx)("h1",{style:K,children:"The TOL Project"}),Object(N.jsx)("div",{style:Z,children:Object(N.jsx)(G,{label:"Toggle demo view",onClick:function(){var e=Object(a.a)(t,2),n=e[0],i=e[1];i("dbPreview"==n?"INFO-start":"dbPreview")}})})]})}var ee=n(29),te=n.n(ee),ne=Q({margin:"10px"}),ie=Q({background:k,margin:"5px"});function re(e){var t,n=Object(i.useState)(null===(t=e.startOpen)||void 0===t||t),r=Object(a.a)(n,2),s=r[0],c=r[1];return Object(N.jsx)("div",{style:ne,children:Object(N.jsx)(te.a,{trigger:Object(N.jsx)(G,{label:e.label,onClick:function(){return c(!s)}}),open:s,easing:"ease-in-out",children:Object(N.jsx)("div",{style:ie,children:e.children})})})}var se=Q({margin:"2px",padding:"10px",textAlign:"justify"}),ce=Q({padding:"1px",margin:0});function ae(e){return Object(N.jsx)(re,{label:e.label,startOpen:e.startOpen,children:Object(N.jsx)("div",{style:se,children:e.longText.trim().split("\n").map((function(e,t){return Object(N.jsx)("p",{style:ce,children:e},t)}))})})}var oe=Q({display:"flex",flexDirection:"column",justifyContent:"center",fontSize:"11pt"}),le=Q({alignSelf:"center"}),de=Q({borderSpacing:0}),je=Q({padding:"5px",paddingInline:"10px",textAlign:"center",border:"thin solid ".concat(C),borderSpacing:"0px",fontSize:"9.5pt"}),ue=Q(je,{fontWeight:"bold",backgroundColor:k,textAlign:"left"}),be=Q({textAlign:"center"});function xe(e){var t,n=e.answers,i=e.questions,r=Object.fromEntries(Object.entries(i).map((function(e){var t=Object(a.a)(e,2),i=t[0],r=t[1],s=0,c=0,o=0;r.forEach((function(e){var t=n[i].find((function(t){return t&&t.id==e.id&&t.sub==e.sub}));t&&t.letter?t.letter==e.correct?s++:o++:c++}));var l=r.length,d=f[i].sample,j=f[i].sub||1,u=f[i].coeff;return[i,{total:l,correct:s,notGiven:c,wrong:o,weight:u,score:new O.a(g*s+m*o+v*c).div(l).mul(d*j)}]}))),s=Object.entries(r).map((function(e){var t=Object(a.a)(e,2)[1];return t.score.mul(t.weight)})).reduce((function(e,t){return e.add(t)}),new O.a(0)),c=s.compare(60)>=0,o=(null===(t=r.ing)||void 0===t?void 0:t.correct)>=24;return Object(N.jsxs)("div",{style:oe,children:[Object(N.jsx)("p",{children:"La simulazione \xe8 finita, questo \xe8 il risultato: "}),Object(N.jsx)("div",{style:le,children:Object(N.jsxs)("table",{style:de,children:[Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{}),Object(N.jsx)("td",{style:ue,children:"Punteggio sezione"}),Object(N.jsx)("td",{style:ue,children:"N\xb0 quesiti"}),Object(N.jsx)("td",{style:ue,children:"Esatti"}),Object(N.jsx)("td",{style:ue,children:"Errati"}),Object(N.jsx)("td",{style:ue,children:"Senza risposta"})]}),Object.entries(r).sort((function(e,t){return f[e[0]].order-f[t[0]].order})).map((function(e){var t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{style:ue,children:h(n)}),Object(N.jsx)("td",{style:je,children:i.score.round(2).toString()}),Object(N.jsx)("td",{style:je,children:i.total}),Object(N.jsx)("td",{style:je,children:i.correct}),Object(N.jsx)("td",{style:je,children:i.wrong}),Object(N.jsx)("td",{style:je,children:i.notGiven})]},n)}))]})}),Object(N.jsxs)("p",{style:be,children:["Punteggio calcolato: ",s.round(2).toString()," / ",100,Object(N.jsx)("br",{}),"Esito:"," ",c?"Superato".concat(o?"":" (OFA TENG)"):"Non superato ".concat(o?"(OFA TEST)":"(OFA TEST + OFA TENG)")]}),Object(N.jsx)(ae,{label:"Come viene calcolato il punteggio",startOpen:!1,longText:"\n      Per ogni sezione viene conteggiato ".concat(g," per ogni risposta corretta, ").concat(m," per ogni risposta errata e ").concat(v," per ogni risposta non data.\n      Il punteggio complessivo della sezione viene poi pesato in base al numero di quesiti e al punteggio massimo ottenibile (rispetto all'intero test):\n      ").concat(Object.entries(f).map((function(e){var t=Object(a.a)(e,2)[1];return"- ".concat(t.name,": peso ").concat("number"==typeof t.coeff?t.coeff:t.coeff.toFraction())})).join("\n"),"\n      ")})]})}var pe=Q({display:"flex",flexDirection:"column",alignItems:"center",margin:"10px"});function Oe(e){return Object(N.jsxs)("div",{style:pe,children:[Object(N.jsx)("p",{children:"Questa \xe8 una serie di informazioni veramente interessanti sulla demo, che prima o poi mi metter\xf2 a scrivere"}),Object(N.jsx)("div",{children:Object(N.jsx)(G,{label:"Inizia il test",onClick:e.startTest})})]})}function fe(e){var t=e.viewState[0];return"INFO-start"==t?Object(N.jsx)(Oe,{startTest:function(){e.viewState[1]("TOL-startSec")}}):"INFO-end"==t?Object(N.jsx)(xe,{answers:e.answers,questions:e.questions}):Object(N.jsx)("div",{})}var ge=n(30),me=Q({fontSize:"11pt"});function ve(e){var t=e.tmpAnswerState;return e.currentQuestion?Object(N.jsxs)("div",{children:[Object(N.jsx)(he,{letter:"a",letterState:t,text:e.currentQuestion.answers.a}),Object(N.jsx)(he,{letter:"b",letterState:t,text:e.currentQuestion.answers.b}),Object(N.jsx)(he,{letter:"c",letterState:t,text:e.currentQuestion.answers.c}),Object(N.jsx)(he,{letter:"d",letterState:t,text:e.currentQuestion.answers.d}),Object(N.jsx)(he,{letter:"e",letterState:t,text:e.currentQuestion.answers.e}),Object(N.jsx)(he,{letter:void 0,letterState:t,text:"Non so"})]}):Object(N.jsxs)("span",{style:me,children:[Object(N.jsx)("br",{}),"No answers to display \xaf\\_(\u30c4)_/\xaf"]})}function he(e){var t,n=Q({fontWeight:"bold",textAlign:"center",verticalAlign:"middle",paddingInline:"10px"}),i=Q({width:"2em",float:"left",display:"inline-block"});return Object(N.jsx)("tr",{style:me,children:Object(N.jsxs)("label",{children:[Object(N.jsxs)("td",{style:n,children:[Object(N.jsxs)("span",{style:i,children:[(null===(t=e.letter)||void 0===t?void 0:t.toUpperCase())||"?"," "]}),Object(N.jsx)("input",{type:"radio",value:e.letter,checked:e.letter==e.letterState[0],onChange:function(t){e.letterState[1](t.target.value||void 0)}})]}),Object(N.jsx)("td",{children:Object(N.jsx)(P,{text:e.text})})]})})}var ye=n(31),Se=Q({display:"flex",flex:1,justifyContent:"flex-end",fontSize:"9.5pt",verticalAlign:"middle",gap:"10px",paddingBlock:"10px"}),we=Q({display:"flex",alignItems:"center"});function Ie(e){var t=Object(a.a)(e.tmpFlaggedState,2),n=t[0],i=t[1];return e.currentQuestion?Object(N.jsxs)("div",{style:Se,children:[Object(N.jsxs)("label",{style:we,children:[Object(N.jsx)("input",{type:"checkbox",checked:n,onChange:function(){i(!n)}}),Object(N.jsx)("span",{children:"Da rivedere"})]}),Object(N.jsx)(G,{label:"Conferma e vai alla successiva",leftIcon:function(){return Object(N.jsx)(ye.a,{})},onClick:function(){e.updateAnswer({id:e.currentQuestion.id,sub:e.currentQuestion.sub,letter:e.tmpAnswerState[0],flagged:n})}})]}):Object(N.jsx)("div",{style:Se})}var ke=n(16),Ce=Q({display:"flex",justifyContent:"space-between"}),Te=Q({display:"flex"}),Ae=Q({display:"flex",padding:"1em",gap:"5px"}),ze=Q({flexGrow:1,flexShrink:1,textAlign:"center",fontSize:"11pt",minWidth:"4em",padding:"7.5px"}),De=Q({height:"17,5px",width:"17,5px"});function Le(e){var t,n,i,r,s,c;return Object(N.jsxs)("div",{style:Ce,children:[Object(N.jsxs)("div",{style:Te,children:[Object(N.jsxs)("p",{style:Object(I.a)(Object(I.a)({},ze),{},{fontWeight:"bold",width:"11em"}),children:["Domanda ",e.questionIndex+1]}),Object(N.jsx)("p",{style:Object(I.a)(Object(I.a)({},ze),{},{backgroundColor:(null===(t=e.currentAnswer)||void 0===t?void 0:t.flagged)?A:(null===(n=e.currentAnswer)||void 0===n?void 0:n.letter)?z:"inherit"}),children:((null===(i=e.currentAnswer)||void 0===i||null===(r=i.letter)||void 0===r?void 0:r.toUpperCase())||"")+((null===(s=e.currentAnswer)||void 0===s?void 0:s.flagged)?"?":"")||" "}),Object(N.jsxs)("p",{style:ze,children:["Risposta ",(null===(c=e.currentAnswer)||void 0===c?void 0:c.letter)?"":"non ","data"]})]}),Object(N.jsxs)("div",{style:Ae,children:[Object(N.jsx)(G,{label:"precedente",onClick:function(){return e.shiftQuestionIndex(-1)},leftIcon:function(){return Object(N.jsx)(ke.a,{style:De})}}),Object(N.jsx)(G,{label:"successiva",onClick:function(){return e.shiftQuestionIndex(1)},rightIcon:function(){return Object(N.jsx)(ke.b,{style:De})}})]})]})}var qe=Q({marginBottom:"5px"}),Qe=Q({maxHeight:"500px"});function Fe(e){var t,n=e.question;return n?Object(N.jsxs)("div",{style:qe,children:[n.track?Object(N.jsx)(ae,{label:"mostra/nascondi traccia",longText:n.track}):Object(N.jsx)("span",{}),Object(N.jsx)(P,{text:n.text}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),(null===(t=n.attachments)||void 0===t?void 0:t.length)&&Object(N.jsx)(re,{label:"mostra/nascondi allegati",children:n.attachments.map((function(e,t){return Object(N.jsxs)("span",{children:[Object(N.jsxs)("p",{style:qe,children:["Allegato ",t+1,":"]}),Object(N.jsx)("img",{src:w(e),style:Qe})]},t+1)}))})]}):Object(N.jsx)("span",{style:qe,children:"No question to display \xaf\\_(\u30c4)_/\xaf"})}var Ee=Q({display:"flex",fontSize:"9.5pt",textDecoration:"none",color:T});function Ne(e){return Object(N.jsx)("a",Object(I.a)(Object(I.a)({style:Ee},e.active?{href:"#"}:{}),{},{children:e.sectionQuestions.map((function(t,n){var i=e.sectionAnswers.find((function(e){return e&&e.id==t.id&&(!t.sub||t.sub==e.sub)}));return Object(N.jsx)(Re,{index:n,letter:null===i||void 0===i?void 0:i.letter,flagged:(null===i||void 0===i?void 0:i.flagged)||!1,onClick:function(){e.active&&e.currentQuestionIndexState[1](n)},selected:e.active&&e.currentQuestionIndexState[0]==n},n)}))}))}var Pe=Q({display:"flex",flexShrink:1,flexDirection:"column",alignContent:"baseline",textAlign:"center",width:"4em"}),Me=Q({padding:"0.3em",height:"1.2em",boxShadow:"1px 0 0 0 #606060, 0 1px 0 0 #606060, 1px 1px 0 0 #606060, /* corner */ 1px 0 0 0 #606060 inset, 0 1px 0 0 #606060 inset"}),Ue=Q({outline:"5px solid ".concat(T),marginInline:"4px",color:"black"}),_e=Q({margin:"auto"});function Re(e){var t;return Object(N.jsxs)("div",{style:Object(I.a)(Object(I.a)({},Pe),{},{backgroundColor:k},e.selected?Ue:{}),onClick:e.onClick,children:[Object(N.jsx)("div",{style:Object(I.a)(Object(I.a)({},Me),{},{borderBottom:"thin solid #606060"},e.selected?{fontWeight:"bold"}:{}),children:Object(N.jsx)("p",{style:_e,children:e.index+1})}),Object(N.jsx)("div",{style:Object(I.a)(Object(I.a)({},Me),{},{backgroundColor:e.flagged?A:e.letter?z:"white"}),children:Object(N.jsxs)("p",{style:_e,children:[(null===(t=e.letter)||void 0===t?void 0:t.toUpperCase())||" ",e.flagged&&"?"]})})]})}var We=n(32),Be=Q({display:"flex",paddingTop:"10px",paddingBottom:"20px",alignItems:"center",flexDirection:"column"});function Ge(e){var t=f[e.section];return Object(N.jsxs)("div",{style:Be,children:[Object(N.jsxs)("p",{children:["Sezione conclusa: ",t.name,Object(N.jsx)("br",{}),"-"," ",e.sectionAnswers.reduce((function(e,t){return t.letter?e+1:e}),0)," ","/ ",e.sectionQuestions.length," risposte date",Object(N.jsx)("br",{}),"- Tempo utilizzato:"," ",Math.floor(e.secondsUsed/60%60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",Math.floor(e.secondsUsed/60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",(e.secondsUsed%60).toLocaleString(void 0,{minimumIntegerDigits:2})," ","/ ",Math.floor(t.minutes/60),":",t.minutes%60,":00 (",Math.floor((60*t.minutes-e.secondsUsed)/60/60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",Math.floor((60*t.minutes-e.secondsUsed)/60%60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",((60*t.minutes-e.secondsUsed)%60).toLocaleString(void 0,{minimumIntegerDigits:2})," ","rimanente)"]}),Object(N.jsx)(G,{label:t.order==Math.max.apply(Math,Object(We.a)(Object.values(f).map((function(e){return e.order}))))?"Vedi esito del test":"Prossima sezione",onClick:e.goToNextSection})]})}var Je=Q({display:"flex",paddingTop:"10px",paddingBottom:"20px",alignItems:"center",flexDirection:"column"});function Ve(e){var t=f[e.section];return Object(N.jsxs)("div",{style:Je,children:[Object(N.jsxs)("p",{children:["Stai per iniziare: ",t.name,Object(N.jsx)("br",{}),"-"," ","com"==e.section?"".concat(t.sample," bran").concat(t.sample>1?"i":"o",", "):"",t.sample," domande",Object(N.jsx)("br",{}),"- ",t.minutes," minuti",Object(N.jsx)("br",{}),"- Peso sezione:"," ","number"==typeof t.coeff?t.coeff:t.coeff.toFraction()]}),Object(N.jsx)(G,{label:"Inzia sezione",onClick:e.startSection})]})}var He=Q({display:"flex",fontWeight:"bold",color:D,border:"2px solid",borderRadius:"4px",height:"1.75em",fontSize:"1.25em",alignItems:"center",paddingInline:"10px"}),Ke=Q({color:L});function Xe(e){var t=e.timer;return Object(N.jsxs)("div",{style:Object(I.a)(Object(I.a)({},He),60*(60*t.hours+t.minutes)+t.seconds<60&&(t.hours+t.minutes+t.seconds!=0||e.expired)?Ke:{}),children:[t.hours.toLocaleString(void 0,{minimumIntegerDigits:2}),":",t.minutes.toLocaleString(void 0,{minimumIntegerDigits:2}),":",t.seconds.toLocaleString(void 0,{minimumIntegerDigits:2})]})}var Ye=Q({display:"flex",alignItems:"center",justifyContent:"space-between"}),Ze=Q({display:"flex",alignItems:"baseline",flexDirection:"row",gap:"15px",fontSize:"11pt"});function $e(e){var t=e.currentSection;return Object(N.jsxs)("div",{style:Ye,children:[Object(N.jsxs)("div",{style:Ze,children:[Object(N.jsx)("div",{children:Object(N.jsxs)("p",{children:["Sezione: ",Object(N.jsx)("b",{children:h(t)})," ",Object(N.jsx)("br",{}),"Riposte: ",e.answers[t].length," /"," ",e.questions[t].length," (",e.answers[t].reduce((function(e,t){return e+(t.flagged?1:0)}),0)," ","da rivedere)"]})}),e.active&&Object(N.jsx)(G,{label:"Chiudi sezione",onClick:e.closeSection})]}),Object(N.jsx)(Xe,{timer:e.timer,expired:e.timerExpired})]})}function et(e){var t=Object(i.useState)(0),n=Object(a.a)(t,2),r=n[0],s=n[1],c=Object(i.useState)(!1),o=Object(i.useState)(),l=Object(i.useState)(!1),d=Object(i.useState)(!1),j=Object(a.a)(e.sectionState,2),u=j[0],b=j[1],x=Object(a.a)(e.viewState,2),p=x[0],O=x[1],g=Object(a.a)(e.answersState,2),m=g[0],v=g[1],h=Object(a.a)(e.timeRecordState,2),y=h[0],S=h[1],w=e.questions[e.sectionState[0]],k=w[r],C=m[u][r],T=!d[0]&&(o[0]!=(null===C||void 0===C?void 0:C.letter)||c[0]!=((null===C||void 0===C?void 0:C.flagged)||!1)),A=function(){alert('Se prima non premi "Conferma e vai alla successiva" la risposta non verr\xe0 salvata.'),d[1](!0)},z=function(){if(T)return A();O("TOL-secRecap"),D(0),o[1](void 0),c[1](!1);var e=m;e[u]=e[u].map((function(e){return Object(I.a)(Object(I.a)({},e),{},{flagged:!1})})),v(e);var t=y;t[u]=60*f[u].minutes-(60*(60*q.hours+q.minutes)+q.seconds),S(t),q.restart(new Date,!1)},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(T&&!t)A();else{var n=m[u][e];c[1]((null===n||void 0===n?void 0:n.flagged)||!1),o[1]((null===n||void 0===n?void 0:n.letter)||void 0),d[1](!1),s(e)}},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(r+e+w.length)%w.length||0;return D(n,t)},q=Object(ge.useTimer)({expiryTimestamp:tt(f[u].minutes),autoStart:!1,onExpire:function(){z(),l[1](!0)}}),Q=[r,D];if(!e.questions)return Object(N.jsx)("span",{children:"Loading..."});return Object(N.jsxs)("div",{children:[Object(N.jsx)($e,{active:"TOL-testing"==p,answers:m,closeSection:z,currentSection:u,questions:e.questions,timer:q,timerExpired:l[0]}),Object(N.jsx)(Ne,{active:"TOL-testing"==p,currentQuestionIndexState:Q,sectionAnswers:m[u],sectionQuestions:w}),"TOL-startSec"==p?Object(N.jsx)(Ve,{section:u,startSection:function(){O("TOL-testing"),q.start()}}):"TOL-testing"==p?Object(N.jsxs)("div",{children:[Object(N.jsx)(Le,{currentAnswer:C,questionIndex:r,shiftQuestionIndex:L,sectionQuestions:w}),Object(N.jsx)(Fe,{question:k}),Object(N.jsx)(ve,{currentAnswer:C,currentQuestion:k,tmpAnswerState:o}),Object(N.jsx)(Ie,{currentQuestion:k,tmpAnswerState:o,tmpFlaggedState:c,updateAnswer:function(e){var t=m;t[u][r]=e,v(t),L(1,!0)}})]}):"TOL-secRecap"==p?Object(N.jsx)(Ge,{goToNextSection:function(){var e=function(e){var t=Object.entries(f).sort((function(e,t){return e[1].order-t[1].order})),n=t.findIndex((function(t){return t[0]==e}));return(t[n+1]||[])[0]}(u);e?(b(e),q.restart(tt(f[e].minutes),!1),l[1](!1),O("TOL-startSec")):O("INFO-end")},section:u,secondsUsed:y[u]||0,sectionAnswers:m[u],sectionQuestions:e.questions[u]}):Object(N.jsx)("div",{})]})}function tt(e){var t=new Date;return t.setSeconds(t.getSeconds()+60*e),t}var nt=Q({height:"15px",backgroundColor:T}),it=Q({color:"white",margin:"auto .5em",fontSize:"9.5pt"});function rt(e){return Object(N.jsx)("div",{style:nt,children:Object(N.jsx)("p",{style:it,children:e.text||""})})}function st(){var e=Object(i.useState)(),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(i.useState)(),c=Object(a.a)(s,2),o=c[0],l=c[1],d=Object(i.useState)("dbPreview"),j=Object(a.a)(d,2),u=j[0],x=j[1],p=Object(i.useState)("ing"),O=Object(i.useState)({ing:[],mat:[],com:[],fis:[]}),g=Object(i.useState)({}),m=Object(i.useState)([]),v=Object(a.a)(m,2),h=v[0],w=v[1];return Object(i.useEffect)((function(){n||function(){return S.apply(this,arguments)}().then((function(e){r(e),l(function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(a.a)(e,1)[0];return Object.values(y).includes(t)})).map((function(e){var t=Object(a.a)(e,2),n=t[0],i=t[1].filter((function(e){return e.validated})),r=b.a.shuffle(b.a.uniq(i.map((function(e){return e.id})))).slice(0,f[n].sample);return[n,b.a.shuffle(i.filter((function(e){return r.includes(e.id)})))]})))}(e))})).catch((function(e){w(["There has been an issue while fetching the database data. Please retry later.",e])}))})),Object(N.jsxs)("div",{children:[Object(N.jsx)($,{viewState:[u,x]}),Object(N.jsx)(rt,{text:"Placeholder top separator text"}),Object(N.jsx)(_,{hidden:!h[0],display:h[0]||"",internal:h[1]}),"dbPreview"==u&&n?Object(N.jsx)(U,{db:n}):u.startsWith("TOL")&&o?Object(N.jsx)(et,{answersState:O,questions:o,sectionState:p,timeRecordState:g,viewState:[u,x]}):u.startsWith("INFO")&&o?Object(N.jsx)(fe,{answers:O[0],questions:o,viewState:[u,x]}):void 0,Object(N.jsx)(rt,{text:"Placeholder bottom separator text"})]})}c.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(st,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.ba5ab4d8.chunk.js.map