(this["webpackJsonpthe-tol-project"]=this["webpackJsonpthe-tol-project"]||[]).push([[0],{120:function(e){e.exports=JSON.parse('{"name":"the-tol-project","version":"0.0.0","private":true,"homepage":"https://polinetworkorg.github.io/TheTOLProject/","scripts":{"build":"react-scripts build","build:db":"ts-node scripts/database.ts","prebuild:db":"npx rimraf temp && npx mkdirp temp/img","deploy":"gh-pages -d build","predeploy":"npm run build","eject":"react-scripts eject","exports":"ts-prune -e","lint":"eslint ./src ./scripts","lint:fix":"npm run lint -- --fix","start":"react-scripts start","test":"npm run build && npm run lint && npm run exports"},"devDependencies":{"@react-pdf/renderer":"^2.0.20","@testing-library/jest-dom":"^5.14.1","@testing-library/react":"^11.2.7","@testing-library/user-event":"^12.8.3","@types/google-spreadsheet":"^3.1.5","@types/jest":"^27.0.2","@types/node":"^16.10.3","@types/react":"^17.0.27","@types/react-dom":"^17.0.9","@types/react-latex":"^2.0.0","@types/underscore":"^1.11.3","@typescript-eslint/eslint-plugin":"^4.33.0","@typescript-eslint/parser":"^4.33.0","axios":"^0.24.0","csstype":"^3.0.9","dotenv":"^10.0.0","eslint":"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","fraction.js":"github:EndBug/Fraction.js","gh-pages":"^3.2.3","google-spreadsheet":"^3.1.15","googleapis":"^39.2.0","mkdirp":"^1.0.4","prettier":"^2.4.1","react":"^17.0.2","react-collapsible":"^2.8.4","react-dom":"^17.0.2","react-icons":"^4.3.1","react-latex":"^2.0.0","react-scripts":"4.0.3","react-timer-hook":"^3.0.5","rimraf":"^3.0.2","ts-node":"^10.3.0","ts-prune":"^0.10.1","typescript":"^4.4.3","underscore":"^1.13.1","web-vitals":"^1.1.2"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},250:function(e,t){},252:function(e,t){},282:function(e,t){},283:function(e,t){},393:function(e,t){},585:function(e,t,n){"use strict";n.r(t);var i=n(6),r=n.n(i),s=n(228),c=n.n(s),o=n(10),a=n(19),l=n(13),d=n.n(l),j=n(236),u=n(237),b=n.n(u),x=n(76),p=n(120),O=n(61),f=n.n(O),h={ing:{name:"Inglese",order:1,sample:30,minutes:15,coeff:new f.a("1/3")},mat:{name:"Matematica",order:2,sample:25,minutes:75,coeff:2.6},com:{name:"Comprensione",order:3,sample:1,sub:5,minutes:10,coeff:3},fis:{name:"Fisica",order:4,sample:5,minutes:10,coeff:2}},g=1,m=-.25,v=0;function y(e){return h[e].name}var w={quesiti_ING:"ing",quesiti_MAT:"mat",quesiti_COM:"com",quesiti_FIS:"fis"};function S(){return(S=Object(j.a)(d.a.mark((function e(){var t,n,i,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://raw.githubusercontent.com/PoliNetworkOrg/TheTOLProjectData/main/database.json");case 2:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===t;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=t.data;case 11:if((null===(r=e.t2)||void 0===r||null===(n=r.meta)||void 0===n?void 0:n.version)==p.version){e.next=14;break}throw new Error("Database version doesn't match application.\nDatabase: ".concat(null===r||void 0===r||null===(i=r.meta)||void 0===i?void 0:i.version,"\nApp: ").concat(p.version));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return"https://raw.githubusercontent.com/PoliNetworkOrg/TheTOLProjectData/main/img/".concat(e)}var k=n(11),T="#F3F3EE",A="#D5DFE4",C="#069",D="yellow",z="#00D700",q="#009527",L="red",F={fontFamily:"verdana",color:"#333"};function Q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(k.a)(Object(k.a)({},F),t.reduce((function(e,t){return Object(k.a)(Object(k.a)({},e),t)}),{}))}var P=n(238),E=n.n(P),N=n(2);function M(e){var t=e.text;return Object(N.jsx)(E.a,{children:t})}var U=Q();function _(e){var t=e.db;return Object(N.jsx)("div",{children:Object.entries(t).filter((function(e){return"meta"!=Object(o.a)(e,1)[0]})).map((function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(N.jsxs)("div",{style:U,children:[Object(N.jsxs)("h3",{children:["Section: ",n]}),Object(N.jsx)("ul",{children:i.filter((function(e){return e.text||"com"==n})).map((function(e){return Object(N.jsxs)("div",{children:[Object(N.jsx)(M,{text:e.text}),Object(N.jsx)("br",{}),Object(N.jsxs)("p",{children:["Valid: ",e.validated+""]}),Object(N.jsx)("br",{}),Object(N.jsx)(M,{text:e.answers.a}),Object(N.jsx)("br",{}),Object(N.jsx)(M,{text:e.answers.b}),Object(N.jsx)("br",{}),Object(N.jsx)(M,{text:e.answers.c}),Object(N.jsx)("br",{}),Object(N.jsx)(M,{text:e.answers.d}),Object(N.jsx)("br",{}),Object(N.jsx)(M,{text:e.answers.e}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{})]},n+e.id+(e.sub||""))}))})]},n)}))})}function B(e){var t=e.hidden,n=e.display,i=e.internal;return Object(N.jsxs)("div",{hidden:t,children:[Object(N.jsx)("h3",{children:n}),Object(N.jsx)("blockquote",{children:i+""})]})}var G=Q({fontFamily:" Arial",fontSize:"9.5pt",alignItems:"center"}),R=Q({float:"left",marginRight:"2px"}),W=Q({float:"right",marginLeft:"2px"});function V(e){return Object(N.jsxs)("button",{style:G,onClick:e.onClick,children:[Object(N.jsx)("span",{style:R,children:e.leftIcon&&e.leftIcon()}),Object(N.jsx)("span",{children:e.label}),Object(N.jsx)("span",{style:W,children:e.rightIcon&&e.rightIcon()})]})}var J=n.p+"static/media/logo.34b8e2e9.webp",H=Q({height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between"}),K=Q({flex:1,fontSize:"18pt",display:"inline-block"}),X=Q(K,{display:"flex",justifyContent:"center"}),Y=Q({flex:1,display:"flex",alignItems:"center",gap:"10px",margin:"5px"}),Z=Q({height:"60px"}),$=Q({display:"flex",flex:1,justifyContent:"flex-end"});function ee(e){var t=e.viewState;return Object(N.jsxs)("div",{style:H,children:[Object(N.jsxs)("div",{style:Y,children:[Object(N.jsx)("img",{src:J,alt:"logo",style:Z}),Object(N.jsx)("h1",{style:K,children:"PoliNetwork"})]}),Object(N.jsx)("h1",{style:X,children:"The TOL Project"}),Object(N.jsx)("div",{style:$,children:Object(N.jsx)(V,{label:"Toggle demo view",onClick:function(){var e=Object(o.a)(t,2),n=e[0],i=e[1];i("dbPreview"==n?"INFO-start":"dbPreview")}})})]})}function te(){return Object(N.jsx)("div",{children:Object(N.jsx)(a.Text,{children:"testtetst"})})}function ne(e){return Object(N.jsx)(a.Document,{children:Object(N.jsxs)(a.Page,{size:"A4",wrap:!0,children:[Object(N.jsx)(a.View,{fixed:!0,children:Object(N.jsx)(te,{})}),Object.entries(e.questions).map((function(t,n){var i=Object(o.a)(t,2),r=i[0],s=i[1];return Object(N.jsxs)(a.View,{break:!!n,children:[Object(N.jsx)(a.Text,{children:r}),s.map((function(t,n){var i;return Object(N.jsxs)(a.View,{children:[Object(N.jsx)(a.Text,{children:Object(N.jsx)(M,{text:"\n                    ".concat(n+1,") [").concat(t.id,"\n                    ").concat(t.sub?"-"+t.sub:"","] ").concat(t.text,"\n                    ").trim()})}),Object(N.jsx)(a.Text,{children:(null===(i=e.answers[r].find((function(e){return(null===e||void 0===e?void 0:e.id)==t.id&&(null===e||void 0===e?void 0:e.sub)==t.sub})))||void 0===i?void 0:i.letter)==t.correct?"GIUSTA":"SBAGLIATA"})]},t.id)}))]},r)}))]})})}var ie=n(239),re=n.n(ie),se=Q({margin:"10px"}),ce=Q({background:T,margin:"5px"});function oe(e){var t,n=Object(i.useState)(null===(t=e.startOpen)||void 0===t||t),r=Object(o.a)(n,2),s=r[0],c=r[1];return Object(N.jsx)("div",{style:se,children:Object(N.jsx)(re.a,{trigger:Object(N.jsx)(V,{label:e.label,onClick:function(){return c(!s)}}),open:s,easing:"ease-in-out",children:Object(N.jsx)("div",{style:ce,children:e.children})})})}var ae=Q({margin:"2px",padding:"10px",textAlign:"justify"}),le=Q({padding:"1px",margin:0});function de(e){return Object(N.jsx)(oe,{label:e.label,startOpen:e.startOpen,children:Object(N.jsx)("div",{style:ae,children:e.longText.trim().split("\n").map((function(e,t){return Object(N.jsx)("p",{style:le,children:e},t)}))})})}var je=Q({display:"flex",flexDirection:"column",justifyContent:"center",fontSize:"11pt"}),ue=Q({alignSelf:"center"}),be=Q({borderSpacing:0}),xe=Q({padding:"5px",paddingInline:"10px",textAlign:"center",border:"thin solid ".concat(A),borderSpacing:"0px",fontSize:"9.5pt"}),pe=Q(xe,{fontWeight:"bold",backgroundColor:T,textAlign:"left"}),Oe=Q({textAlign:"center"});function fe(e){var t,n=e.answers,i=e.questions,r=Object.fromEntries(Object.entries(i).map((function(e){var t=Object(o.a)(e,2),i=t[0],r=t[1],s=0,c=0,a=0;r.forEach((function(e){var t=n[i].find((function(t){return t&&t.id==e.id&&t.sub==e.sub}));t&&t.letter?t.letter==e.correct?s++:a++:c++}));var l=r.length,d=h[i].sample,j=h[i].sub||1,u=h[i].coeff;return[i,{total:l,correct:s,notGiven:c,wrong:a,weight:u,score:new f.a(g*s+m*a+v*c).div(l).mul(d*j)}]}))),s=Object.entries(r).map((function(e){var t=Object(o.a)(e,2)[1];return t.score.mul(t.weight)})).reduce((function(e,t){return e.add(t)}),new f.a(0)),c=s.compare(60)>=0,l=(null===(t=r.ing)||void 0===t?void 0:t.correct)>=24;return Object(N.jsxs)("div",{style:je,children:[Object(N.jsx)("p",{children:"La simulazione \xe8 finita, questo \xe8 il risultato: "}),Object(N.jsx)("div",{style:ue,children:Object(N.jsxs)("table",{style:be,children:[Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{}),Object(N.jsx)("td",{style:pe,children:"Punteggio sezione"}),Object(N.jsx)("td",{style:pe,children:"N\xb0 quesiti"}),Object(N.jsx)("td",{style:pe,children:"Esatti"}),Object(N.jsx)("td",{style:pe,children:"Errati"}),Object(N.jsx)("td",{style:pe,children:"Senza risposta"})]}),Object.entries(r).sort((function(e,t){return h[e[0]].order-h[t[0]].order})).map((function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{style:pe,children:y(n)}),Object(N.jsx)("td",{style:xe,children:i.score.round(2).toString()}),Object(N.jsx)("td",{style:xe,children:i.total}),Object(N.jsx)("td",{style:xe,children:i.correct}),Object(N.jsx)("td",{style:xe,children:i.wrong}),Object(N.jsx)("td",{style:xe,children:i.notGiven})]},n)}))]})}),Object(N.jsxs)("p",{style:Oe,children:["Punteggio calcolato: ",s.round(2).toString()," / ",100,Object(N.jsx)("br",{}),"Esito:"," ",c?"Superato".concat(l?"":" (OFA TENG)"):"Non superato ".concat(l?"(OFA TEST)":"(OFA TEST + OFA TENG)")]}),Object(N.jsx)(de,{label:"Come viene calcolato il punteggio",startOpen:!1,longText:"\n      Per ogni sezione viene conteggiato ".concat(g," per ogni risposta corretta, ").concat(m," per ogni risposta errata e ").concat(v," per ogni risposta non data.\n      Il punteggio complessivo della sezione viene poi pesato in base al numero di quesiti e al punteggio massimo ottenibile (rispetto all'intero test):\n      ").concat(Object.entries(h).map((function(e){var t=Object(o.a)(e,2)[1];return"- ".concat(t.name,": peso ").concat("number"==typeof t.coeff?t.coeff:t.coeff.toFraction())})).join("\n"),"\n      ")}),Object(N.jsx)(oe,{label:"Correzione extesa",children:Object(N.jsx)(a.PDFViewer,{showToolbar:!0,width:"100%",height:"1000px",children:Object(N.jsx)(ne,{answers:e.answers,questions:e.questions})})})]})}var he=Q({display:"flex",flexDirection:"column",alignItems:"center",margin:"10px"});function ge(e){return Object(N.jsxs)("div",{style:he,children:[Object(N.jsx)("p",{children:"Questa \xe8 una serie di informazioni veramente interessanti sulla demo, che prima o poi mi metter\xf2 a scrivere"}),Object(N.jsx)("div",{children:Object(N.jsx)(V,{label:"Inizia il test",onClick:e.startTest})})]})}function me(e){var t=e.viewState[0];return"INFO-start"==t?Object(N.jsx)(ge,{startTest:function(){e.viewState[1]("TOL-startSec")}}):"INFO-end"==t?Object(N.jsx)(fe,{answers:e.answers,questions:e.questions}):Object(N.jsx)("div",{})}var ve=n(240),ye=Q({fontSize:"11pt"});function we(e){var t=e.tmpAnswerState;return e.currentQuestion?Object(N.jsxs)("div",{children:[Object(N.jsx)(Se,{letter:"a",letterState:t,text:e.currentQuestion.answers.a}),Object(N.jsx)(Se,{letter:"b",letterState:t,text:e.currentQuestion.answers.b}),Object(N.jsx)(Se,{letter:"c",letterState:t,text:e.currentQuestion.answers.c}),Object(N.jsx)(Se,{letter:"d",letterState:t,text:e.currentQuestion.answers.d}),Object(N.jsx)(Se,{letter:"e",letterState:t,text:e.currentQuestion.answers.e}),Object(N.jsx)(Se,{letter:void 0,letterState:t,text:"Non so"})]}):Object(N.jsxs)("span",{style:ye,children:[Object(N.jsx)("br",{}),"No answers to display \xaf\\_(\u30c4)_/\xaf"]})}function Se(e){var t,n=Q({fontWeight:"bold",textAlign:"center",verticalAlign:"middle",paddingInline:"10px"}),i=Q({width:"2em",float:"left",display:"inline-block"});return Object(N.jsx)("tr",{style:ye,children:Object(N.jsxs)("label",{children:[Object(N.jsxs)("td",{style:n,children:[Object(N.jsxs)("span",{style:i,children:[(null===(t=e.letter)||void 0===t?void 0:t.toUpperCase())||"?"," "]}),Object(N.jsx)("input",{type:"radio",value:e.letter,checked:e.letter==e.letterState[0],onChange:function(t){e.letterState[1](t.target.value||void 0)}})]}),Object(N.jsx)("td",{children:Object(N.jsx)(M,{text:e.text})})]})})}var Ie=n(241),ke=Q({display:"flex",flex:1,justifyContent:"flex-end",fontSize:"9.5pt",verticalAlign:"middle",gap:"10px",paddingBlock:"10px"}),Te=Q({display:"flex",alignItems:"center"});function Ae(e){var t=Object(o.a)(e.tmpFlaggedState,2),n=t[0],i=t[1];return e.currentQuestion?Object(N.jsxs)("div",{style:ke,children:[Object(N.jsxs)("label",{style:Te,children:[Object(N.jsx)("input",{type:"checkbox",checked:n,onChange:function(){i(!n)}}),Object(N.jsx)("span",{children:"Da rivedere"})]}),Object(N.jsx)(V,{label:"Conferma e vai alla successiva",leftIcon:function(){return Object(N.jsx)(Ie.a,{})},onClick:function(){e.updateAnswer({id:e.currentQuestion.id,sub:e.currentQuestion.sub,letter:e.tmpAnswerState[0],flagged:n})}})]}):Object(N.jsx)("div",{style:ke})}var Ce=n(121),De=Q({display:"flex",justifyContent:"space-between"}),ze=Q({display:"flex"}),qe=Q({display:"flex",padding:"1em",gap:"5px"}),Le=Q({flexGrow:1,flexShrink:1,textAlign:"center",fontSize:"11pt",minWidth:"4em",padding:"7.5px"}),Fe=Q({height:"17,5px",width:"17,5px"});function Qe(e){var t,n,i,r,s,c;return Object(N.jsxs)("div",{style:De,children:[Object(N.jsxs)("div",{style:ze,children:[Object(N.jsxs)("p",{style:Object(k.a)(Object(k.a)({},Le),{},{fontWeight:"bold",width:"11em"}),children:["Domanda ",e.questionIndex+1]}),Object(N.jsx)("p",{style:Object(k.a)(Object(k.a)({},Le),{},{backgroundColor:(null===(t=e.currentAnswer)||void 0===t?void 0:t.flagged)?D:(null===(n=e.currentAnswer)||void 0===n?void 0:n.letter)?z:"inherit"}),children:((null===(i=e.currentAnswer)||void 0===i||null===(r=i.letter)||void 0===r?void 0:r.toUpperCase())||"")+((null===(s=e.currentAnswer)||void 0===s?void 0:s.flagged)?"?":"")||" "}),Object(N.jsxs)("p",{style:Le,children:["Risposta ",(null===(c=e.currentAnswer)||void 0===c?void 0:c.letter)?"":"non ","data"]})]}),Object(N.jsxs)("div",{style:qe,children:[Object(N.jsx)(V,{label:"precedente",onClick:function(){return e.shiftQuestionIndex(-1)},leftIcon:function(){return Object(N.jsx)(Ce.a,{style:Fe})}}),Object(N.jsx)(V,{label:"successiva",onClick:function(){return e.shiftQuestionIndex(1)},rightIcon:function(){return Object(N.jsx)(Ce.b,{style:Fe})}})]})]})}var Pe=Q({marginBottom:"5px"}),Ee=Q({maxHeight:"500px"});function Ne(e){var t,n=e.question;return n?Object(N.jsxs)("div",{style:Pe,children:[n.track?Object(N.jsx)(de,{label:"mostra/nascondi traccia",longText:n.track}):Object(N.jsx)("span",{}),Object(N.jsx)(M,{text:n.text}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),(null===(t=n.attachments)||void 0===t?void 0:t.length)&&Object(N.jsx)(oe,{label:"mostra/nascondi allegati",children:n.attachments.map((function(e,t){return Object(N.jsxs)("span",{children:[Object(N.jsxs)("p",{style:Pe,children:["Allegato ",t+1,":"]}),Object(N.jsx)("img",{src:I(e),style:Ee})]},t+1)}))})]}):Object(N.jsx)("span",{style:Pe,children:"No question to display \xaf\\_(\u30c4)_/\xaf"})}var Me=Q({display:"flex",fontSize:"9.5pt",textDecoration:"none",color:C});function Ue(e){return Object(N.jsx)("a",Object(k.a)(Object(k.a)({style:Me},e.active?{href:"#"}:{}),{},{children:e.sectionQuestions.map((function(t,n){var i=e.sectionAnswers.find((function(e){return e&&e.id==t.id&&(!t.sub||t.sub==e.sub)}));return Object(N.jsx)(We,{index:n,letter:null===i||void 0===i?void 0:i.letter,flagged:(null===i||void 0===i?void 0:i.flagged)||!1,onClick:function(){e.active&&e.currentQuestionIndexState[1](n)},selected:e.active&&e.currentQuestionIndexState[0]==n},n)}))}))}var _e=Q({display:"flex",flexShrink:1,flexDirection:"column",alignContent:"baseline",textAlign:"center",width:"4em"}),Be=Q({padding:"0.3em",height:"1.2em",boxShadow:"1px 0 0 0 #606060, 0 1px 0 0 #606060, 1px 1px 0 0 #606060, /* corner */ 1px 0 0 0 #606060 inset, 0 1px 0 0 #606060 inset"}),Ge=Q({outline:"5px solid ".concat(C),marginInline:"4px",color:"black"}),Re=Q({margin:"auto"});function We(e){var t;return Object(N.jsxs)("div",{style:Object(k.a)(Object(k.a)({},_e),{},{backgroundColor:T},e.selected?Ge:{}),onClick:e.onClick,children:[Object(N.jsx)("div",{style:Object(k.a)(Object(k.a)({},Be),{},{borderBottom:"thin solid #606060"},e.selected?{fontWeight:"bold"}:{}),children:Object(N.jsx)("p",{style:Re,children:e.index+1})}),Object(N.jsx)("div",{style:Object(k.a)(Object(k.a)({},Be),{},{backgroundColor:e.flagged?D:e.letter?z:"white"}),children:Object(N.jsxs)("p",{style:Re,children:[(null===(t=e.letter)||void 0===t?void 0:t.toUpperCase())||" ",e.flagged&&"?"]})})]})}var Ve=n(242),Je=Q({display:"flex",paddingTop:"10px",paddingBottom:"20px",alignItems:"center",flexDirection:"column"});function He(e){var t=h[e.section];return Object(N.jsxs)("div",{style:Je,children:[Object(N.jsxs)("p",{children:["Sezione conclusa: ",t.name,Object(N.jsx)("br",{}),"-"," ",e.sectionAnswers.reduce((function(e,t){return t.letter?e+1:e}),0)," ","/ ",e.sectionQuestions.length," risposte date",Object(N.jsx)("br",{}),"- Tempo utilizzato:"," ",Math.floor(e.secondsUsed/60%60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",Math.floor(e.secondsUsed/60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",(e.secondsUsed%60).toLocaleString(void 0,{minimumIntegerDigits:2})," ","/ ",Math.floor(t.minutes/60),":",t.minutes%60,":00 (",Math.floor((60*t.minutes-e.secondsUsed)/60/60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",Math.floor((60*t.minutes-e.secondsUsed)/60%60).toLocaleString(void 0,{minimumIntegerDigits:2}),":",((60*t.minutes-e.secondsUsed)%60).toLocaleString(void 0,{minimumIntegerDigits:2})," ","rimanente)"]}),Object(N.jsx)(V,{label:t.order==Math.max.apply(Math,Object(Ve.a)(Object.values(h).map((function(e){return e.order}))))?"Vedi esito del test":"Prossima sezione",onClick:e.goToNextSection})]})}var Ke=Q({display:"flex",paddingTop:"10px",paddingBottom:"20px",alignItems:"center",flexDirection:"column"});function Xe(e){var t=h[e.section];return Object(N.jsxs)("div",{style:Ke,children:[Object(N.jsxs)("p",{children:["Stai per iniziare: ",t.name,Object(N.jsx)("br",{}),"-"," ","com"==e.section?"".concat(t.sample," bran").concat(t.sample>1?"i":"o",", "):"",t.sample," domande",Object(N.jsx)("br",{}),"- ",t.minutes," minuti",Object(N.jsx)("br",{}),"- Peso sezione:"," ","number"==typeof t.coeff?t.coeff:t.coeff.toFraction()]}),Object(N.jsx)(V,{label:"Inzia sezione",onClick:e.startSection})]})}var Ye=Q({display:"flex",fontWeight:"bold",color:q,border:"2px solid",borderRadius:"4px",height:"1.75em",fontSize:"1.25em",alignItems:"center",paddingInline:"10px"}),Ze=Q({color:L});function $e(e){var t=e.timer;return Object(N.jsxs)("div",{style:Object(k.a)(Object(k.a)({},Ye),60*(60*t.hours+t.minutes)+t.seconds<60&&(t.hours+t.minutes+t.seconds!=0||e.expired)?Ze:{}),children:[t.hours.toLocaleString(void 0,{minimumIntegerDigits:2}),":",t.minutes.toLocaleString(void 0,{minimumIntegerDigits:2}),":",t.seconds.toLocaleString(void 0,{minimumIntegerDigits:2})]})}var et=Q({display:"flex",alignItems:"center",justifyContent:"space-between"}),tt=Q({display:"flex",alignItems:"baseline",flexDirection:"row",gap:"15px",fontSize:"11pt"});function nt(e){var t=e.currentSection;return Object(N.jsxs)("div",{style:et,children:[Object(N.jsxs)("div",{style:tt,children:[Object(N.jsx)("div",{children:Object(N.jsxs)("p",{children:["Sezione: ",Object(N.jsx)("b",{children:y(t)})," ",Object(N.jsx)("br",{}),"Riposte: ",e.answers[t].length," /"," ",e.questions[t].length," (",e.answers[t].reduce((function(e,t){return e+(t.flagged?1:0)}),0)," ","da rivedere)"]})}),e.active&&Object(N.jsx)(V,{label:"Chiudi sezione",onClick:e.closeSection})]}),Object(N.jsx)($e,{timer:e.timer,expired:e.timerExpired})]})}function it(e){var t=Object(i.useState)(0),n=Object(o.a)(t,2),r=n[0],s=n[1],c=Object(i.useState)(!1),a=Object(i.useState)(),l=Object(i.useState)(!1),d=Object(i.useState)(!1),j=Object(o.a)(e.sectionState,2),u=j[0],b=j[1],x=Object(o.a)(e.viewState,2),p=x[0],O=x[1],f=Object(o.a)(e.answersState,2),g=f[0],m=f[1],v=Object(o.a)(e.timeRecordState,2),y=v[0],w=v[1],S=e.questions[e.sectionState[0]],I=S[r],T=g[u][r],A=!d[0]&&(a[0]!=(null===T||void 0===T?void 0:T.letter)||c[0]!=((null===T||void 0===T?void 0:T.flagged)||!1)),C=function(){alert('Se prima non premi "Conferma e vai alla successiva" la risposta non verr\xe0 salvata.'),d[1](!0)},D=function(){if(A)return C();O("TOL-secRecap"),z(0),a[1](void 0),c[1](!1);var e=g;e[u]=e[u].map((function(e){return Object(k.a)(Object(k.a)({},e),{},{flagged:!1})})),m(e);var t=y;t[u]=60*h[u].minutes-(60*(60*L.hours+L.minutes)+L.seconds),w(t),L.restart(new Date,!1)},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(A&&!t)C();else{var n=g[u][e];c[1]((null===n||void 0===n?void 0:n.flagged)||!1),a[1]((null===n||void 0===n?void 0:n.letter)||void 0),d[1](!1),s(e)}},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(r+e+S.length)%S.length||0;return z(n,t)},L=Object(ve.useTimer)({expiryTimestamp:rt(h[u].minutes),autoStart:!1,onExpire:function(){D(),l[1](!0)}}),F=[r,z];if(!e.questions)return Object(N.jsx)("span",{children:"Loading..."});return Object(N.jsxs)("div",{children:[Object(N.jsx)(nt,{active:"TOL-testing"==p,answers:g,closeSection:D,currentSection:u,questions:e.questions,timer:L,timerExpired:l[0]}),Object(N.jsx)(Ue,{active:"TOL-testing"==p,currentQuestionIndexState:F,sectionAnswers:g[u],sectionQuestions:S}),"TOL-startSec"==p?Object(N.jsx)(Xe,{section:u,startSection:function(){O("TOL-testing"),L.start()}}):"TOL-testing"==p?Object(N.jsxs)("div",{children:[Object(N.jsx)(Qe,{currentAnswer:T,questionIndex:r,shiftQuestionIndex:q,sectionQuestions:S}),Object(N.jsx)(Ne,{question:I}),Object(N.jsx)(we,{currentAnswer:T,currentQuestion:I,tmpAnswerState:a}),Object(N.jsx)(Ae,{currentQuestion:I,tmpAnswerState:a,tmpFlaggedState:c,updateAnswer:function(e){var t=g;t[u][r]=e,m(t),q(1,!0)}})]}):"TOL-secRecap"==p?Object(N.jsx)(He,{goToNextSection:function(){var e=function(e){var t=Object.entries(h).sort((function(e,t){return e[1].order-t[1].order})),n=t.findIndex((function(t){return t[0]==e}));return(t[n+1]||[])[0]}(u);e?(b(e),L.restart(rt(h[e].minutes),!1),l[1](!1),O("TOL-startSec")):O("INFO-end")},section:u,secondsUsed:y[u]||0,sectionAnswers:g[u],sectionQuestions:e.questions[u]}):Object(N.jsx)("div",{})]})}function rt(e){var t=new Date;return t.setSeconds(t.getSeconds()+60*e),t}var st=Q({height:"15px",backgroundColor:C}),ct=Q({color:"white",margin:"auto .5em",fontSize:"9.5pt"});function ot(e){return Object(N.jsx)("div",{style:st,children:Object(N.jsx)("p",{style:ct,children:e.text||""})})}function at(){var e=Object(i.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(i.useState)(),c=Object(o.a)(s,2),l=c[0],d=c[1],j=Object(i.useState)("dbPreview"),u=Object(o.a)(j,2),b=u[0],p=u[1],O=Object(i.useState)("ing"),f=Object(i.useState)({ing:[],mat:[],com:[],fis:[]}),g=Object(i.useState)({}),m=Object(i.useState)([]),v=Object(o.a)(m,2),y=v[0],I=v[1];return Object(i.useEffect)((function(){n||function(){return S.apply(this,arguments)}().then((function(e){r(e),d(function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(o.a)(e,1)[0];return Object.values(w).includes(t)})).map((function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1].filter((function(e){return e.validated})),r=x.a.shuffle(x.a.uniq(i.map((function(e){return e.id})))).slice(0,h[n].sample);return[n,x.a.shuffle(i.filter((function(e){return r.includes(e.id)})))]})))}(e))})).catch((function(e){I(["There has been an issue while fetching the database data. Please retry later.",e])}))})),Object(N.jsxs)("div",{children:[Object(N.jsx)(ee,{viewState:[b,p]}),Object(N.jsx)(ot,{text:"Placeholder top separator text"}),Object(N.jsx)(B,{hidden:!y[0],display:y[0]||"",internal:y[1]}),l&&Object(N.jsx)(a.PDFViewer,{showToolbar:!0,width:"100%",height:"1000px",children:Object(N.jsx)(ne,{answers:f[0],questions:l})}),"dbPreview"==b&&n?Object(N.jsx)(_,{db:n}):b.startsWith("TOL")&&l?Object(N.jsx)(it,{answersState:f,questions:l,sectionState:O,timeRecordState:g,viewState:[b,p]}):b.startsWith("INFO")&&l?Object(N.jsx)(me,{answers:f[0],questions:l,viewState:[b,p]}):void 0,Object(N.jsx)(ot,{text:"Placeholder bottom separator text"})]})}c.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(at,{})}),document.getElementById("root"))}},[[585,1,2]]]);
//# sourceMappingURL=main.2dbdfae3.chunk.js.map